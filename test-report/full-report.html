<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:3,&quot;tests&quot;:21,&quot;passes&quot;:16,&quot;pending&quot;:0,&quot;failures&quot;:5,&quot;start&quot;:&quot;2025-11-25T10:07:56.264Z&quot;,&quot;end&quot;:&quot;2025-11-25T10:09:10.058Z&quot;,&quot;duration&quot;:73794,&quot;testsRegistered&quot;:21,&quot;passPercent&quot;:76.19047619047619,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;bfeeaba8-44b8-436a-b8dc-6f416e8e82c0&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3adeb4a0-0f4f-4714-8613-9538ae20ed16&quot;,&quot;title&quot;:&quot;TC-02: Company Vehicle Management - Driver License Upload&quot;,&quot;fullFile&quot;:&quot;C:\\aaFERI\\PREDMETI\\3. Semestar\\VUI\\App\\RIRSsolo\\automation\\TC02.js&quot;,&quot;file&quot;:&quot;\\automation\\TC02.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;TC-02: Company Vehicle Management - Driver License Upload\&quot;&quot;,&quot;fullTitle&quot;:&quot;TC-02: Company Vehicle Management - Driver License Upload \&quot;before all\&quot; hook in \&quot;TC-02: Company Vehicle Management - Driver License Upload\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:558,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let options = new chrome.Options();\noptions.addArguments(&#x27;--remote-allow-origins=*&#x27;); \noptions.addArguments(&#x27;--disable-search-engine-choice-screen&#x27;); \noptions.addArguments(&#x27;--start-maximized&#x27;);\ndriver = await new Builder()\n    .forBrowser(&#x27;chrome&#x27;)\n    .setChromeOptions(options)\n    .build();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18afcde1-d58f-4e11-be4e-2a38d8675d85&quot;,&quot;parentUUID&quot;:&quot;3adeb4a0-0f4f-4714-8613-9538ae20ed16&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;TC-02: Company Vehicle Management - Driver License Upload\&quot;&quot;,&quot;fullTitle&quot;:&quot;TC-02: Company Vehicle Management - Driver License Upload \&quot;after all\&quot; hook in \&quot;TC-02: Company Vehicle Management - Driver License Upload\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (driver) await driver.quit();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c3e0915-81b5-4750-8d26-ad9f9a94ae57&quot;,&quot;parentUUID&quot;:&quot;3adeb4a0-0f4f-4714-8613-9538ae20ed16&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Step 1: Login as Driver&quot;,&quot;fullTitle&quot;:&quot;TC-02: Company Vehicle Management - Driver License Upload Step 1: Login as Driver&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1641,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await driver.get(APP_URL);\n\nconst emailInput = await driver.wait(until.elementLocated(By.css(&#x27;input[type=\&quot;email\&quot;]&#x27;)), 10000);\nconst passInput = await driver.findElement(By.css(&#x27;input[type=\&quot;password\&quot;]&#x27;));\n\nawait emailInput.sendKeys(DRIVER_EMAIL);\nawait passInput.sendKeys(DRIVER_PASS);\n\nconst loginBtn = await driver.findElement(By.className(&#x27;login-button&#x27;));\nawait loginBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;View Profile&#x27;]\&quot;)), 10000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f0ceab5-f58f-4ec0-a20d-a4d6d2004ea6&quot;,&quot;parentUUID&quot;:&quot;3adeb4a0-0f4f-4714-8613-9538ae20ed16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 2: Navigate to Profile&quot;,&quot;fullTitle&quot;:&quot;TC-02: Company Vehicle Management - Driver License Upload Step 2: Navigate to Profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const profileBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;View Profile&#x27;]\&quot;));\nawait profileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//h3[contains(text(), &#x27;Update Driver’s License&#x27;)]\&quot;)), 10000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;731cd217-e270-4c7c-93f8-655b0ded817b&quot;,&quot;parentUUID&quot;:&quot;3adeb4a0-0f4f-4714-8613-9538ae20ed16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: Upload 1mb.docx -&gt; Expect: error&quot;,&quot;fullTitle&quot;:&quot;TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload 1mb.docx -&gt; Expect: error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3354,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css(&#x27;input[type=\&quot;file\&quot;]&#x27;));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className(&#x27;upload-button&#x27;));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className(&#x27;profile-message&#x27;)), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === &#x27;success&#x27;) {\n    expect(messageText).to.include(&#x27;License uploaded successfully&#x27;);\n} else {\n    expect(messageText).to.not.include(&#x27;License uploaded successfully&#x27;, `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \&quot;Back to Dashboard\&quot;\nconst backBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Back to Dashboard&#x27;]\&quot;));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;View Profile&#x27;]\&quot;)), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//h3[contains(text(), &#x27;Update Driver’s License&#x27;)]\&quot;)), 5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bfce07d4-b0fb-429f-9cae-1d837f308fa8&quot;,&quot;parentUUID&quot;:&quot;3adeb4a0-0f4f-4714-8613-9538ae20ed16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: Upload 5mb.png -&gt; Expect: success&quot;,&quot;fullTitle&quot;:&quot;TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload 5mb.png -&gt; Expect: success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5294,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css(&#x27;input[type=\&quot;file\&quot;]&#x27;));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className(&#x27;upload-button&#x27;));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className(&#x27;profile-message&#x27;)), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === &#x27;success&#x27;) {\n    expect(messageText).to.include(&#x27;License uploaded successfully&#x27;);\n} else {\n    expect(messageText).to.not.include(&#x27;License uploaded successfully&#x27;, `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \&quot;Back to Dashboard\&quot;\nconst backBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Back to Dashboard&#x27;]\&quot;));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;View Profile&#x27;]\&quot;)), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//h3[contains(text(), &#x27;Update Driver’s License&#x27;)]\&quot;)), 5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19a72b77-d486-44af-adf9-3588ca92621c&quot;,&quot;parentUUID&quot;:&quot;3adeb4a0-0f4f-4714-8613-9538ae20ed16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: Upload 6mb.png -&gt; Expect: error&quot;,&quot;fullTitle&quot;:&quot;TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload 6mb.png -&gt; Expect: error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5648,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css(&#x27;input[type=\&quot;file\&quot;]&#x27;));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className(&#x27;upload-button&#x27;));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className(&#x27;profile-message&#x27;)), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === &#x27;success&#x27;) {\n    expect(messageText).to.include(&#x27;License uploaded successfully&#x27;);\n} else {\n    expect(messageText).to.not.include(&#x27;License uploaded successfully&#x27;, `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \&quot;Back to Dashboard\&quot;\nconst backBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Back to Dashboard&#x27;]\&quot;));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;View Profile&#x27;]\&quot;)), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//h3[contains(text(), &#x27;Update Driver’s License&#x27;)]\&quot;)), 5000);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Bug Found: App allowed 6mb.png: expected &#x27;License uploaded successfully&#x27; to not include &#x27;License uploaded successfully&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: Bug Found: App allowed 6mb.png: expected &#x27;License uploaded successfully&#x27; to not include &#x27;License uploaded successfully&#x27;\n    at Context.&lt;anonymous&gt; (automation\\TC02.js:109:44)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;},&quot;uuid&quot;:&quot;2c56c9a7-0e44-495c-a7eb-a4408edda702&quot;,&quot;parentUUID&quot;:&quot;3adeb4a0-0f4f-4714-8613-9538ae20ed16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: Upload jpg1kb.jpeg -&gt; Expect: success&quot;,&quot;fullTitle&quot;:&quot;TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload jpg1kb.jpeg -&gt; Expect: success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1148,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css(&#x27;input[type=\&quot;file\&quot;]&#x27;));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className(&#x27;upload-button&#x27;));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className(&#x27;profile-message&#x27;)), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === &#x27;success&#x27;) {\n    expect(messageText).to.include(&#x27;License uploaded successfully&#x27;);\n} else {\n    expect(messageText).to.not.include(&#x27;License uploaded successfully&#x27;, `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \&quot;Back to Dashboard\&quot;\nconst backBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Back to Dashboard&#x27;]\&quot;));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;View Profile&#x27;]\&quot;)), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//h3[contains(text(), &#x27;Update Driver’s License&#x27;)]\&quot;)), 5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;264c88ec-6793-42e0-952c-fdb85d1efd55&quot;,&quot;parentUUID&quot;:&quot;3adeb4a0-0f4f-4714-8613-9538ae20ed16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: Upload png300kb.png -&gt; Expect: success&quot;,&quot;fullTitle&quot;:&quot;TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload png300kb.png -&gt; Expect: success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3345,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css(&#x27;input[type=\&quot;file\&quot;]&#x27;));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className(&#x27;upload-button&#x27;));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className(&#x27;profile-message&#x27;)), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === &#x27;success&#x27;) {\n    expect(messageText).to.include(&#x27;License uploaded successfully&#x27;);\n} else {\n    expect(messageText).to.not.include(&#x27;License uploaded successfully&#x27;, `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \&quot;Back to Dashboard\&quot;\nconst backBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Back to Dashboard&#x27;]\&quot;));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;View Profile&#x27;]\&quot;)), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//h3[contains(text(), &#x27;Update Driver’s License&#x27;)]\&quot;)), 5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eef1abeb-1862-430f-9914-39c56829c13f&quot;,&quot;parentUUID&quot;:&quot;3adeb4a0-0f4f-4714-8613-9538ae20ed16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4f0ceab5-f58f-4ec0-a20d-a4d6d2004ea6&quot;,&quot;731cd217-e270-4c7c-93f8-655b0ded817b&quot;,&quot;bfce07d4-b0fb-429f-9cae-1d837f308fa8&quot;,&quot;19a72b77-d486-44af-adf9-3588ca92621c&quot;,&quot;264c88ec-6793-42e0-952c-fdb85d1efd55&quot;,&quot;eef1abeb-1862-430f-9914-39c56829c13f&quot;],&quot;failures&quot;:[&quot;2c56c9a7-0e44-495c-a7eb-a4408edda702&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20495,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;dee544d9-597d-4556-bc15-86408cacd41a&quot;,&quot;title&quot;:&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation&quot;,&quot;fullFile&quot;:&quot;C:\\aaFERI\\PREDMETI\\3. Semestar\\VUI\\App\\RIRSsolo\\automation\\TC03.js&quot;,&quot;file&quot;:&quot;\\automation\\TC03.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation\&quot;&quot;,&quot;fullTitle&quot;:&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation \&quot;before all\&quot; hook in \&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:559,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let options = new chrome.Options();\noptions.addArguments(&#x27;--remote-allow-origins=*&#x27;);\noptions.addArguments(&#x27;--disable-search-engine-choice-screen&#x27;);\noptions.addArguments(&#x27;--start-maximized&#x27;);\ndriver = await new Builder().forBrowser(&#x27;chrome&#x27;).setChromeOptions(options).build();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e7ce23e-e4a4-4751-83bb-3da97ef27ceb&quot;,&quot;parentUUID&quot;:&quot;dee544d9-597d-4556-bc15-86408cacd41a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation\&quot;&quot;,&quot;fullTitle&quot;:&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation \&quot;after all\&quot; hook in \&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11216,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (!driver) return;\nconsole.log(&#x27;\\n   [Cleanup] Starting \&quot;Search &amp; Destroy\&quot; Sequence...&#x27;);\ntry {\n    // 1. Force Reset to Dashboard to ensure we aren&#x27;t stuck on an Error page\n    await driver.get(APP_URL);\n    await driver.sleep(1000);\n    // 2. Safety Net: Re-login if session was lost\n    const loginInputs = await driver.findElements(By.css(&#x27;input[type=\&quot;email\&quot;]&#x27;));\n    if (loginInputs.length &gt; 0) {\n        console.log(\&quot;   [Cleanup] Session lost. Re-logging in...\&quot;);\n        await loginInputs[0].sendKeys(ADMIN_EMAIL);\n        await driver.findElement(By.css(&#x27;input[type=\&quot;password\&quot;]&#x27;)).sendKeys(ADMIN_PASS);\n        await driver.findElement(By.className(&#x27;login-button&#x27;)).click();\n        await driver.sleep(1000);\n    }\n    // 3. Navigate to List\n    const viewBtn = await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;View Vehicles&#x27;]\&quot;)), 5000);\n    await viewBtn.click();\n    \n    // 4. Wait for Table to Render\n    await driver.wait(until.elementLocated(By.className(&#x27;vehicle-table&#x27;)), 5000);\n    // 5. DELETE LOOP\n    for (const tc of testCases) {\n        const name = tc.data.name;\n        // Loop until no rows with this name exist\n        while (true) {\n            try {\n                // Find row with name\n                const xpath = `//tr[td[contains(text(), &#x27;${name}&#x27;)]]//button[text()=&#x27;Delete&#x27;]`;\n                const btns = await driver.findElements(By.xpath(xpath));\n                if (btns.length === 0) break; // Clean!\n                // Delete found instance\n                const btn = btns[0];\n                await driver.executeScript(\&quot;arguments[0].scrollIntoView(true);\&quot;, btn);\n                await btn.click();\n                console.log(`   [Cleanup] Deleted residual: ${name}`);\n                \n                // Wait for refresh\n                await driver.sleep(1500);\n            } catch (e) {\n                break; // Move to next name on error\n            }\n        }\n    }\n} catch (e) {\n    console.error(\&quot;   [Cleanup Error] Could not complete cleanup:\&quot;, e.message);\n} finally {\n    await driver.quit();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdaf5ff3-e33b-4452-aabb-af369e89f753&quot;,&quot;parentUUID&quot;:&quot;dee544d9-597d-4556-bc15-86408cacd41a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Step 1: Login as Admin&quot;,&quot;fullTitle&quot;:&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation Step 1: Login as Admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1623,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await driver.get(APP_URL);\nconst emailInput = await driver.wait(until.elementLocated(By.css(&#x27;input[type=\&quot;email\&quot;]&#x27;)), 10000);\nconst passInput = await driver.findElement(By.css(&#x27;input[type=\&quot;password\&quot;]&#x27;));\nawait emailInput.sendKeys(ADMIN_EMAIL);\nawait passInput.sendKeys(ADMIN_PASS);\nconst loginBtn = await driver.findElement(By.className(&#x27;login-button&#x27;));\nawait loginBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;View Vehicles&#x27;]\&quot;)), 10000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fcd6fdf9-24a6-4bef-82e7-79f28bc2bede&quot;,&quot;parentUUID&quot;:&quot;dee544d9-597d-4556-bc15-86408cacd41a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 2: Navigate to Vehicle List&quot;,&quot;fullTitle&quot;:&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation Step 2: Navigate to Vehicle List&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:56,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const viewVehiclesBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;View Vehicles&#x27;]\&quot;));\nawait viewVehiclesBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;List of All Vehicles&#x27;]\&quot;)), 10000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;edcc2fab-4c8c-4725-a257-54ad21845b0b&quot;,&quot;parentUUID&quot;:&quot;dee544d9-597d-4556-bc15-86408cacd41a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: 1. Lower Boundaries (Valid) -&gt; Expect: success&quot;,&quot;fullTitle&quot;:&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation Step 3: 1. Lower Boundaries (Valid) -&gt; Expect: success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2733,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;Add Vehicle&#x27;]\&quot;)), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;Add vehicle&#x27;]\&quot;)), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Name\&quot;]&#x27;)).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Color\&quot;]&#x27;)).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Year\&quot;]&#x27;)).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Engine\&quot;]&#x27;)).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;HP\&quot;]&#x27;)).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Add vehicle&#x27;]\&quot;));\nawait submitBtn.click();\n// Logic\nif (tc.expected === &#x27;success&#x27;) {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className(&#x27;vehicle-table&#x27;)), 10000);\n        const tableText = await driver.findElement(By.className(&#x27;vehicle-table&#x27;)).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\&quot;Add vehicle\&quot;)) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className(&#x27;vehicle-table&#x27;));\n    \n    if (tables.length &gt; 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className(&#x27;error-message&#x27;)), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className(&#x27;goto-vehicle-select-button&#x27;));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className(&#x27;vehicle-table&#x27;)), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96824f61-397c-4503-84ac-c2fad9d6ea56&quot;,&quot;parentUUID&quot;:&quot;dee544d9-597d-4556-bc15-86408cacd41a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: 2. Upper Boundaries (Valid) -&gt; Expect: success&quot;,&quot;fullTitle&quot;:&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation Step 3: 2. Upper Boundaries (Valid) -&gt; Expect: success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1827,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;Add Vehicle&#x27;]\&quot;)), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;Add vehicle&#x27;]\&quot;)), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Name\&quot;]&#x27;)).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Color\&quot;]&#x27;)).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Year\&quot;]&#x27;)).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Engine\&quot;]&#x27;)).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;HP\&quot;]&#x27;)).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Add vehicle&#x27;]\&quot;));\nawait submitBtn.click();\n// Logic\nif (tc.expected === &#x27;success&#x27;) {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className(&#x27;vehicle-table&#x27;)), 10000);\n        const tableText = await driver.findElement(By.className(&#x27;vehicle-table&#x27;)).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\&quot;Add vehicle\&quot;)) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className(&#x27;vehicle-table&#x27;));\n    \n    if (tables.length &gt; 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className(&#x27;error-message&#x27;)), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className(&#x27;goto-vehicle-select-button&#x27;));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className(&#x27;vehicle-table&#x27;)), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f4b83a5-5cce-45e0-b6fa-4d90f13e571f&quot;,&quot;parentUUID&quot;:&quot;dee544d9-597d-4556-bc15-86408cacd41a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: 3. Invalid Year (1989) -&gt; Expect: error&quot;,&quot;fullTitle&quot;:&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation Step 3: 3. Invalid Year (1989) -&gt; Expect: error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3624,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;Add Vehicle&#x27;]\&quot;)), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;Add vehicle&#x27;]\&quot;)), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Name\&quot;]&#x27;)).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Color\&quot;]&#x27;)).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Year\&quot;]&#x27;)).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Engine\&quot;]&#x27;)).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;HP\&quot;]&#x27;)).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Add vehicle&#x27;]\&quot;));\nawait submitBtn.click();\n// Logic\nif (tc.expected === &#x27;success&#x27;) {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className(&#x27;vehicle-table&#x27;)), 10000);\n        const tableText = await driver.findElement(By.className(&#x27;vehicle-table&#x27;)).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\&quot;Add vehicle\&quot;)) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className(&#x27;vehicle-table&#x27;));\n    \n    if (tables.length &gt; 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className(&#x27;error-message&#x27;)), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className(&#x27;goto-vehicle-select-button&#x27;));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className(&#x27;vehicle-table&#x27;)), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: Expected error message not found.&quot;,&quot;estack&quot;:&quot;Error: Expected error message not found.\n    at Context.&lt;anonymous&gt; (automation\\TC03.js:164:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;},&quot;uuid&quot;:&quot;ca3fea2f-4a45-40fb-adbb-d5405c5af795&quot;,&quot;parentUUID&quot;:&quot;dee544d9-597d-4556-bc15-86408cacd41a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: 4. Invalid HP (39) -&gt; Expect: error&quot;,&quot;fullTitle&quot;:&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation Step 3: 4. Invalid HP (39) -&gt; Expect: error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3685,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;Add Vehicle&#x27;]\&quot;)), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;Add vehicle&#x27;]\&quot;)), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Name\&quot;]&#x27;)).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Color\&quot;]&#x27;)).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Year\&quot;]&#x27;)).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Engine\&quot;]&#x27;)).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;HP\&quot;]&#x27;)).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Add vehicle&#x27;]\&quot;));\nawait submitBtn.click();\n// Logic\nif (tc.expected === &#x27;success&#x27;) {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className(&#x27;vehicle-table&#x27;)), 10000);\n        const tableText = await driver.findElement(By.className(&#x27;vehicle-table&#x27;)).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\&quot;Add vehicle\&quot;)) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className(&#x27;vehicle-table&#x27;));\n    \n    if (tables.length &gt; 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className(&#x27;error-message&#x27;)), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className(&#x27;goto-vehicle-select-button&#x27;));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className(&#x27;vehicle-table&#x27;)), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: Expected error message not found.&quot;,&quot;estack&quot;:&quot;Error: Expected error message not found.\n    at Context.&lt;anonymous&gt; (automation\\TC03.js:164:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;},&quot;uuid&quot;:&quot;b8776cca-0892-4310-94e3-19eb57639381&quot;,&quot;parentUUID&quot;:&quot;dee544d9-597d-4556-bc15-86408cacd41a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: 5. Missing Field (Color) -&gt; Expect: error&quot;,&quot;fullTitle&quot;:&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation Step 3: 5. Missing Field (Color) -&gt; Expect: error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2625,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;Add Vehicle&#x27;]\&quot;)), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;Add vehicle&#x27;]\&quot;)), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Name\&quot;]&#x27;)).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Color\&quot;]&#x27;)).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Year\&quot;]&#x27;)).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Engine\&quot;]&#x27;)).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;HP\&quot;]&#x27;)).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Add vehicle&#x27;]\&quot;));\nawait submitBtn.click();\n// Logic\nif (tc.expected === &#x27;success&#x27;) {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className(&#x27;vehicle-table&#x27;)), 10000);\n        const tableText = await driver.findElement(By.className(&#x27;vehicle-table&#x27;)).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\&quot;Add vehicle\&quot;)) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className(&#x27;vehicle-table&#x27;));\n    \n    if (tables.length &gt; 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className(&#x27;error-message&#x27;)), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className(&#x27;goto-vehicle-select-button&#x27;));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className(&#x27;vehicle-table&#x27;)), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e13baa2a-6903-4650-9d46-2a4f6e986ad9&quot;,&quot;parentUUID&quot;:&quot;dee544d9-597d-4556-bc15-86408cacd41a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: 6. Capitalized Color (Valid + Filter Check) -&gt; Expect: success&quot;,&quot;fullTitle&quot;:&quot;TC-03: Admin Add Vehicle &amp; Filtering Validation Step 3: 6. Capitalized Color (Valid + Filter Check) -&gt; Expect: success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1851,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;Add Vehicle&#x27;]\&quot;)), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;Add vehicle&#x27;]\&quot;)), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Name\&quot;]&#x27;)).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Color\&quot;]&#x27;)).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Vehicle Year\&quot;]&#x27;)).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;Engine\&quot;]&#x27;)).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css(&#x27;input[placeholder=\&quot;HP\&quot;]&#x27;)).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Add vehicle&#x27;]\&quot;));\nawait submitBtn.click();\n// Logic\nif (tc.expected === &#x27;success&#x27;) {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className(&#x27;vehicle-table&#x27;)), 10000);\n        const tableText = await driver.findElement(By.className(&#x27;vehicle-table&#x27;)).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\&quot;Add vehicle\&quot;)) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className(&#x27;vehicle-table&#x27;));\n    \n    if (tables.length &gt; 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className(&#x27;error-message&#x27;)), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className(&#x27;goto-vehicle-select-button&#x27;));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className(&#x27;vehicle-table&#x27;)), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3321ebb8-635b-48be-bbee-7607ea06f148&quot;,&quot;parentUUID&quot;:&quot;dee544d9-597d-4556-bc15-86408cacd41a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fcd6fdf9-24a6-4bef-82e7-79f28bc2bede&quot;,&quot;edcc2fab-4c8c-4725-a257-54ad21845b0b&quot;,&quot;96824f61-397c-4503-84ac-c2fad9d6ea56&quot;,&quot;6f4b83a5-5cce-45e0-b6fa-4d90f13e571f&quot;,&quot;e13baa2a-6903-4650-9d46-2a4f6e986ad9&quot;,&quot;3321ebb8-635b-48be-bbee-7607ea06f148&quot;],&quot;failures&quot;:[&quot;ca3fea2f-4a45-40fb-adbb-d5405c5af795&quot;,&quot;b8776cca-0892-4310-94e3-19eb57639381&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18024,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d1904b90-72cb-45e3-a7f9-402bf081a4d7&quot;,&quot;title&quot;:&quot;TC-04: Driver Vehicle Reservation &amp; Date Rules&quot;,&quot;fullFile&quot;:&quot;C:\\aaFERI\\PREDMETI\\3. Semestar\\VUI\\App\\RIRSsolo\\automation\\TC04.js&quot;,&quot;file&quot;:&quot;\\automation\\TC04.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;TC-04: Driver Vehicle Reservation &amp; Date Rules\&quot;&quot;,&quot;fullTitle&quot;:&quot;TC-04: Driver Vehicle Reservation &amp; Date Rules \&quot;before all\&quot; hook in \&quot;TC-04: Driver Vehicle Reservation &amp; Date Rules\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:598,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let options = new chrome.Options();\noptions.addArguments(&#x27;--remote-allow-origins=*&#x27;);\noptions.addArguments(&#x27;--disable-search-engine-choice-screen&#x27;);\noptions.addArguments(&#x27;--start-maximized&#x27;);\ndriver = await new Builder().forBrowser(&#x27;chrome&#x27;).setChromeOptions(options).build();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39e879e7-a7fd-4cd3-8209-3a7f3d1a093d&quot;,&quot;parentUUID&quot;:&quot;d1904b90-72cb-45e3-a7f9-402bf081a4d7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;TC-04: Driver Vehicle Reservation &amp; Date Rules\&quot;&quot;,&quot;fullTitle&quot;:&quot;TC-04: Driver Vehicle Reservation &amp; Date Rules \&quot;after all\&quot; hook in \&quot;TC-04: Driver Vehicle Reservation &amp; Date Rules\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1063,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (driver) {\n    // Final Safety Net Cleanup\n    await cleanupReservation(driver);\n    await driver.quit();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8095f91f-adc9-4212-83d6-d8a519ecf8ee&quot;,&quot;parentUUID&quot;:&quot;d1904b90-72cb-45e3-a7f9-402bf081a4d7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Step 1: Login as Driver&quot;,&quot;fullTitle&quot;:&quot;TC-04: Driver Vehicle Reservation &amp; Date Rules Step 1: Login as Driver&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1615,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await driver.get(APP_URL);\nconst emailInput = await driver.wait(until.elementLocated(By.css(&#x27;input[type=\&quot;email\&quot;]&#x27;)), 10000);\nawait emailInput.sendKeys(DRIVER_EMAIL);\nawait driver.findElement(By.css(&#x27;input[type=\&quot;password\&quot;]&#x27;)).sendKeys(DRIVER_PASS);\nawait driver.findElement(By.className(&#x27;login-button&#x27;)).click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;Reserve Vehicle&#x27;]\&quot;)), 10000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb1c1e89-2749-4978-9da1-c90f40c3fc3e&quot;,&quot;parentUUID&quot;:&quot;d1904b90-72cb-45e3-a7f9-402bf081a4d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 2: Navigate to Vehicle List&quot;,&quot;fullTitle&quot;:&quot;TC-04: Driver Vehicle Reservation &amp; Date Rules Step 2: Navigate to Vehicle List&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1590,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const reserveBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Reserve Vehicle&#x27;]\&quot;));\nawait reserveBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;List of All Vehicles&#x27;]\&quot;)), 10000);\nawait driver.wait(until.elementLocated(By.className(&#x27;vehicle-table&#x27;)), 10000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c4dff63-7470-4499-9891-55703274ba36&quot;,&quot;parentUUID&quot;:&quot;d1904b90-72cb-45e3-a7f9-402bf081a4d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: 1. Valid: Start Today, End Tomorrow -&gt; Expect: success&quot;,&quot;fullTitle&quot;:&quot;TC-04: Driver Vehicle Reservation &amp; Date Rules Step 3: 1. Valid: Start Today, End Tomorrow -&gt; Expect: success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4305,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn&#x27;t leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className(&#x27;reserve-button&#x27;));\n    if (reserveBtns.length === 0) {\n        throw new Error(\&quot;No available vehicles to reserve! Previous cleanup might have failed.\&quot;);\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\&quot;arguments[0].scrollIntoView(true);\&quot;, firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;Reserve Vehicle&#x27;]\&quot;)), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Reserve&#x27;]\&quot;));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === &#x27;success&#x27;) {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;List of All Vehicles&#x27;]\&quot;)), 5000);\n            // Verify \&quot;Remove Reserve\&quot; button appears\n            await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;Remove Reserve&#x27;]\&quot;)), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\&quot;Reserve Vehicle\&quot;)) {\n                 let msg = \&quot;Unknown\&quot;;\n                 try { msg = await driver.findElement(By.className(&#x27;profile-message&#x27;)).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName(&#x27;h2&#x27;));\n        let headerText = headers.length &gt; 0 ? await headers[0].getText() : \&quot;\&quot;;\n        if (headerText.includes(&#x27;List of All Vehicles&#x27;)) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className(&#x27;profile-message&#x27;)), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className(&#x27;goto-vehicle-select-button&#x27;));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;List of All Vehicles&#x27;]\&quot;)), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === &#x27;success&#x27;) {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ae4f00d-739a-4db5-9aff-5abda80ea1b3&quot;,&quot;parentUUID&quot;:&quot;d1904b90-72cb-45e3-a7f9-402bf081a4d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: 2. Valid: Start Today, End +30 days -&gt; Expect: success&quot;,&quot;fullTitle&quot;:&quot;TC-04: Driver Vehicle Reservation &amp; Date Rules Step 3: 2. Valid: Start Today, End +30 days -&gt; Expect: success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4427,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn&#x27;t leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className(&#x27;reserve-button&#x27;));\n    if (reserveBtns.length === 0) {\n        throw new Error(\&quot;No available vehicles to reserve! Previous cleanup might have failed.\&quot;);\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\&quot;arguments[0].scrollIntoView(true);\&quot;, firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;Reserve Vehicle&#x27;]\&quot;)), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Reserve&#x27;]\&quot;));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === &#x27;success&#x27;) {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;List of All Vehicles&#x27;]\&quot;)), 5000);\n            // Verify \&quot;Remove Reserve\&quot; button appears\n            await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;Remove Reserve&#x27;]\&quot;)), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\&quot;Reserve Vehicle\&quot;)) {\n                 let msg = \&quot;Unknown\&quot;;\n                 try { msg = await driver.findElement(By.className(&#x27;profile-message&#x27;)).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName(&#x27;h2&#x27;));\n        let headerText = headers.length &gt; 0 ? await headers[0].getText() : \&quot;\&quot;;\n        if (headerText.includes(&#x27;List of All Vehicles&#x27;)) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className(&#x27;profile-message&#x27;)), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className(&#x27;goto-vehicle-select-button&#x27;));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;List of All Vehicles&#x27;]\&quot;)), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === &#x27;success&#x27;) {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4034257-5f60-4a6f-b8d7-5f22dfbbd9b3&quot;,&quot;parentUUID&quot;:&quot;d1904b90-72cb-45e3-a7f9-402bf081a4d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: 3. Invalid: Start Today, End Today (0 days) -&gt; Expect: error&quot;,&quot;fullTitle&quot;:&quot;TC-04: Driver Vehicle Reservation &amp; Date Rules Step 3: 3. Invalid: Start Today, End Today (0 days) -&gt; Expect: error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4640,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn&#x27;t leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className(&#x27;reserve-button&#x27;));\n    if (reserveBtns.length === 0) {\n        throw new Error(\&quot;No available vehicles to reserve! Previous cleanup might have failed.\&quot;);\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\&quot;arguments[0].scrollIntoView(true);\&quot;, firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;Reserve Vehicle&#x27;]\&quot;)), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Reserve&#x27;]\&quot;));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === &#x27;success&#x27;) {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;List of All Vehicles&#x27;]\&quot;)), 5000);\n            // Verify \&quot;Remove Reserve\&quot; button appears\n            await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;Remove Reserve&#x27;]\&quot;)), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\&quot;Reserve Vehicle\&quot;)) {\n                 let msg = \&quot;Unknown\&quot;;\n                 try { msg = await driver.findElement(By.className(&#x27;profile-message&#x27;)).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName(&#x27;h2&#x27;));\n        let headerText = headers.length &gt; 0 ? await headers[0].getText() : \&quot;\&quot;;\n        if (headerText.includes(&#x27;List of All Vehicles&#x27;)) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className(&#x27;profile-message&#x27;)), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className(&#x27;goto-vehicle-select-button&#x27;));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;List of All Vehicles&#x27;]\&quot;)), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === &#x27;success&#x27;) {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: Bug Found: App allowed invalid reservation duration (0 days).&quot;,&quot;estack&quot;:&quot;Error: Bug Found: App allowed invalid reservation duration (0 days).\n    at Context.&lt;anonymous&gt; (automation\\TC04.js:166:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;},&quot;uuid&quot;:&quot;f5adada9-70db-459e-adc9-447046a07414&quot;,&quot;parentUUID&quot;:&quot;d1904b90-72cb-45e3-a7f9-402bf081a4d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Step 3: 4. Invalid: Start Today, End +31 days -&gt; Expect: error&quot;,&quot;fullTitle&quot;:&quot;TC-04: Driver Vehicle Reservation &amp; Date Rules Step 3: 4. Invalid: Start Today, End +31 days -&gt; Expect: error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4649,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn&#x27;t leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className(&#x27;reserve-button&#x27;));\n    if (reserveBtns.length === 0) {\n        throw new Error(\&quot;No available vehicles to reserve! Previous cleanup might have failed.\&quot;);\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\&quot;arguments[0].scrollIntoView(true);\&quot;, firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;Reserve Vehicle&#x27;]\&quot;)), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\&quot;//button[text()=&#x27;Reserve&#x27;]\&quot;));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === &#x27;success&#x27;) {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;List of All Vehicles&#x27;]\&quot;)), 5000);\n            // Verify \&quot;Remove Reserve\&quot; button appears\n            await driver.wait(until.elementLocated(By.xpath(\&quot;//button[text()=&#x27;Remove Reserve&#x27;]\&quot;)), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\&quot;Reserve Vehicle\&quot;)) {\n                 let msg = \&quot;Unknown\&quot;;\n                 try { msg = await driver.findElement(By.className(&#x27;profile-message&#x27;)).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName(&#x27;h2&#x27;));\n        let headerText = headers.length &gt; 0 ? await headers[0].getText() : \&quot;\&quot;;\n        if (headerText.includes(&#x27;List of All Vehicles&#x27;)) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className(&#x27;profile-message&#x27;)), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className(&#x27;goto-vehicle-select-button&#x27;));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\&quot;//h2[text()=&#x27;List of All Vehicles&#x27;]\&quot;)), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === &#x27;success&#x27;) {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: Bug Found: App allowed invalid reservation duration (31 days).&quot;,&quot;estack&quot;:&quot;Error: Bug Found: App allowed invalid reservation duration (31 days).\n    at Context.&lt;anonymous&gt; (automation\\TC04.js:166:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;},&quot;uuid&quot;:&quot;946af4e2-bb35-4ff5-8071-5694e2f00c06&quot;,&quot;parentUUID&quot;:&quot;d1904b90-72cb-45e3-a7f9-402bf081a4d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cb1c1e89-2749-4978-9da1-c90f40c3fc3e&quot;,&quot;6c4dff63-7470-4499-9891-55703274ba36&quot;,&quot;7ae4f00d-739a-4db5-9aff-5abda80ea1b3&quot;,&quot;c4034257-5f60-4a6f-b8d7-5f22dfbbd9b3&quot;],&quot;failures&quot;:[&quot;f5adada9-70db-459e-adc9-447046a07414&quot;,&quot;946af4e2-bb35-4ff5-8071-5694e2f00c06&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21226,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.7.5&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;full-report&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.4&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;test-report&quot;,&quot;reportFilename&quot;:&quot;full-report&quot;,&quot;overwrite&quot;:&quot;true&quot;},&quot;version&quot;:&quot;6.3.2&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;full-report&quot;,&quot;reportDir&quot;:&quot;test-report&quot;,&quot;reportTitle&quot;:&quot;RIRSsolo&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;test-report\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\aaFERI\\PREDMETI\\3. Semestar\\VUI\\App\\RIRSsolo\\test-report\\full-report.json&quot;,&quot;htmlFile&quot;:&quot;C:\\aaFERI\\PREDMETI\\3. Semestar\\VUI\\App\\RIRSsolo\\test-report\\full-report.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>