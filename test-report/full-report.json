{
  "stats": {
    "suites": 3,
    "tests": 21,
    "passes": 16,
    "pending": 0,
    "failures": 5,
    "start": "2025-11-25T09:02:07.416Z",
    "end": "2025-11-25T09:03:20.918Z",
    "duration": 73502,
    "testsRegistered": 21,
    "passPercent": 76.19047619047619,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "206e4f02-6832-4676-b2ea-b66b921e6d2a",
      "title": "",
      "fullFile": "",
      "file": "",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "3107b503-369a-4f1e-a0cf-c1f8e9bcb094",
          "title": "TC-03: Admin Add Vehicle & Filtering Validation",
          "fullFile": "C:\\aaFERI\\PREDMETI\\3. Semestar\\VUI\\App\\RIRSsolo\\automation\\admin_vehicle_tests.js",
          "file": "\\automation\\admin_vehicle_tests.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"TC-03: Admin Add Vehicle & Filtering Validation\"",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation \"before all\" hook in \"TC-03: Admin Add Vehicle & Filtering Validation\"",
              "timedOut": false,
              "duration": 610,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "let options = new chrome.Options();\noptions.addArguments('--remote-allow-origins=*');\noptions.addArguments('--disable-search-engine-choice-screen');\noptions.addArguments('--start-maximized');\ndriver = await new Builder().forBrowser('chrome').setChromeOptions(options).build();",
              "err": {},
              "uuid": "67730196-6e96-4ea9-93c7-49c30bdaff2e",
              "parentUUID": "3107b503-369a-4f1e-a0cf-c1f8e9bcb094",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"TC-03: Admin Add Vehicle & Filtering Validation\"",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation \"after all\" hook in \"TC-03: Admin Add Vehicle & Filtering Validation\"",
              "timedOut": false,
              "duration": 11293,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (!driver) return;\nconsole.log('\\n   [Cleanup] Starting \"Search & Destroy\" Sequence...');\ntry {\n    // 1. Force Reset to Dashboard to ensure we aren't stuck on an Error page\n    await driver.get(APP_URL);\n    await driver.sleep(1000);\n    // 2. Safety Net: Re-login if session was lost\n    const loginInputs = await driver.findElements(By.css('input[type=\"email\"]'));\n    if (loginInputs.length > 0) {\n        console.log(\"   [Cleanup] Session lost. Re-logging in...\");\n        await loginInputs[0].sendKeys(ADMIN_EMAIL);\n        await driver.findElement(By.css('input[type=\"password\"]')).sendKeys(ADMIN_PASS);\n        await driver.findElement(By.className('login-button')).click();\n        await driver.sleep(1000);\n    }\n    // 3. Navigate to List\n    const viewBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Vehicles']\")), 5000);\n    await viewBtn.click();\n    \n    // 4. Wait for Table to Render\n    await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n    // 5. DELETE LOOP\n    for (const tc of testCases) {\n        const name = tc.data.name;\n        // Loop until no rows with this name exist\n        while (true) {\n            try {\n                // Find row with name\n                const xpath = `//tr[td[contains(text(), '${name}')]]//button[text()='Delete']`;\n                const btns = await driver.findElements(By.xpath(xpath));\n                if (btns.length === 0) break; // Clean!\n                // Delete found instance\n                const btn = btns[0];\n                await driver.executeScript(\"arguments[0].scrollIntoView(true);\", btn);\n                await btn.click();\n                console.log(`   [Cleanup] Deleted residual: ${name}`);\n                \n                // Wait for refresh\n                await driver.sleep(1500);\n            } catch (e) {\n                break; // Move to next name on error\n            }\n        }\n    }\n} catch (e) {\n    console.error(\"   [Cleanup Error] Could not complete cleanup:\", e.message);\n} finally {\n    await driver.quit();\n}",
              "err": {},
              "uuid": "e65d162d-8e8a-4eb6-9176-9dd1f4588641",
              "parentUUID": "3107b503-369a-4f1e-a0cf-c1f8e9bcb094",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "Step 1: Login as Admin",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 1: Login as Admin",
              "timedOut": false,
              "duration": 1621,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await driver.get(APP_URL);\nconst emailInput = await driver.wait(until.elementLocated(By.css('input[type=\"email\"]')), 10000);\nconst passInput = await driver.findElement(By.css('input[type=\"password\"]'));\nawait emailInput.sendKeys(ADMIN_EMAIL);\nawait passInput.sendKeys(ADMIN_PASS);\nconst loginBtn = await driver.findElement(By.className('login-button'));\nawait loginBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Vehicles']\")), 10000);",
              "err": {},
              "uuid": "d3386693-e3e7-482e-ae74-854ed4639d5a",
              "parentUUID": "3107b503-369a-4f1e-a0cf-c1f8e9bcb094",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 2: Navigate to Vehicle List",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 2: Navigate to Vehicle List",
              "timedOut": false,
              "duration": 64,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const viewVehiclesBtn = await driver.findElement(By.xpath(\"//button[text()='View Vehicles']\"));\nawait viewVehiclesBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 10000);",
              "err": {},
              "uuid": "c790e5c7-f74a-416c-b8be-a4631483457d",
              "parentUUID": "3107b503-369a-4f1e-a0cf-c1f8e9bcb094",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 1. Lower Boundaries (Valid) -> Expect: success",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 1. Lower Boundaries (Valid) -> Expect: success",
              "timedOut": false,
              "duration": 3536,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {},
              "uuid": "9677f94a-9f60-444b-b9ac-6cab54611c49",
              "parentUUID": "3107b503-369a-4f1e-a0cf-c1f8e9bcb094",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 2. Upper Boundaries (Valid) -> Expect: success",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 2. Upper Boundaries (Valid) -> Expect: success",
              "timedOut": false,
              "duration": 1804,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {},
              "uuid": "19667583-47af-468a-9d8e-5c6efd42b577",
              "parentUUID": "3107b503-369a-4f1e-a0cf-c1f8e9bcb094",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 3. Invalid Year (1989) -> Expect: error",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 3. Invalid Year (1989) -> Expect: error",
              "timedOut": false,
              "duration": 3669,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {
                "message": "Error: Expected error message not found.",
                "estack": "Error: Expected error message not found.\n    at Context.<anonymous> (automation\\admin_vehicle_tests.js:164:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "4f368269-8814-4f77-b5db-b24a61e2b745",
              "parentUUID": "3107b503-369a-4f1e-a0cf-c1f8e9bcb094",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 4. Invalid HP (39) -> Expect: error",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 4. Invalid HP (39) -> Expect: error",
              "timedOut": false,
              "duration": 3712,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {
                "message": "Error: Expected error message not found.",
                "estack": "Error: Expected error message not found.\n    at Context.<anonymous> (automation\\admin_vehicle_tests.js:164:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "f05df662-7941-4710-a43f-9a7e6ccaa71c",
              "parentUUID": "3107b503-369a-4f1e-a0cf-c1f8e9bcb094",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 5. Missing Field (Color) -> Expect: error",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 5. Missing Field (Color) -> Expect: error",
              "timedOut": false,
              "duration": 2613,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {},
              "uuid": "87d0fcbd-d77e-403e-82d8-d38837bab1c5",
              "parentUUID": "3107b503-369a-4f1e-a0cf-c1f8e9bcb094",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 6. Capitalized Color (Valid + Filter Check) -> Expect: success",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 6. Capitalized Color (Valid + Filter Check) -> Expect: success",
              "timedOut": false,
              "duration": 1526,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {},
              "uuid": "209e46ef-9745-4fc0-8d26-9082abe32527",
              "parentUUID": "3107b503-369a-4f1e-a0cf-c1f8e9bcb094",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "d3386693-e3e7-482e-ae74-854ed4639d5a",
            "c790e5c7-f74a-416c-b8be-a4631483457d",
            "9677f94a-9f60-444b-b9ac-6cab54611c49",
            "19667583-47af-468a-9d8e-5c6efd42b577",
            "87d0fcbd-d77e-403e-82d8-d38837bab1c5",
            "209e46ef-9745-4fc0-8d26-9082abe32527"
          ],
          "failures": [
            "4f368269-8814-4f77-b5db-b24a61e2b745",
            "f05df662-7941-4710-a43f-9a7e6ccaa71c"
          ],
          "pending": [],
          "skipped": [],
          "duration": 18545,
          "root": false,
          "rootEmpty": false,
          "_timeout": 60000
        },
        {
          "uuid": "8d7f85fb-a107-4d24-a93d-7c7ca3662945",
          "title": "TC-02: Company Vehicle Management - Driver License Upload",
          "fullFile": "C:\\aaFERI\\PREDMETI\\3. Semestar\\VUI\\App\\RIRSsolo\\automation\\company_vehicle_tests.js",
          "file": "\\automation\\company_vehicle_tests.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"TC-02: Company Vehicle Management - Driver License Upload\"",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload \"before all\" hook in \"TC-02: Company Vehicle Management - Driver License Upload\"",
              "timedOut": false,
              "duration": 544,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "let options = new chrome.Options();\noptions.addArguments('--remote-allow-origins=*'); \noptions.addArguments('--disable-search-engine-choice-screen'); \noptions.addArguments('--start-maximized');\ndriver = await new Builder()\n    .forBrowser('chrome')\n    .setChromeOptions(options)\n    .build();",
              "err": {},
              "uuid": "5245b33d-8612-4e0c-b2d9-7491d3b1fcb5",
              "parentUUID": "8d7f85fb-a107-4d24-a93d-7c7ca3662945",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"TC-02: Company Vehicle Management - Driver License Upload\"",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload \"after all\" hook in \"TC-02: Company Vehicle Management - Driver License Upload\"",
              "timedOut": false,
              "duration": 43,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (driver) await driver.quit();",
              "err": {},
              "uuid": "1c02a1fc-ea0a-47bf-8fd6-25736606064a",
              "parentUUID": "8d7f85fb-a107-4d24-a93d-7c7ca3662945",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "Step 1: Login as Driver",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 1: Login as Driver",
              "timedOut": false,
              "duration": 1594,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await driver.get(APP_URL);\n\nconst emailInput = await driver.wait(until.elementLocated(By.css('input[type=\"email\"]')), 10000);\nconst passInput = await driver.findElement(By.css('input[type=\"password\"]'));\n\nawait emailInput.sendKeys(DRIVER_EMAIL);\nawait passInput.sendKeys(DRIVER_PASS);\n\nconst loginBtn = await driver.findElement(By.className('login-button'));\nawait loginBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 10000);",
              "err": {},
              "uuid": "567c8307-7385-48b7-9f9c-234ff237ef60",
              "parentUUID": "8d7f85fb-a107-4d24-a93d-7c7ca3662945",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 2: Navigate to Profile",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 2: Navigate to Profile",
              "timedOut": false,
              "duration": 58,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const profileBtn = await driver.findElement(By.xpath(\"//button[text()='View Profile']\"));\nawait profileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 10000);",
              "err": {},
              "uuid": "d362414c-d9e7-44df-8379-934335a714e0",
              "parentUUID": "8d7f85fb-a107-4d24-a93d-7c7ca3662945",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload 1mb.docx -> Expect: error",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload 1mb.docx -> Expect: error",
              "timedOut": false,
              "duration": 3558,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {},
              "uuid": "f1412698-b27b-4db6-a6e0-bf8c2f36cb77",
              "parentUUID": "8d7f85fb-a107-4d24-a93d-7c7ca3662945",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload 5mb.png -> Expect: success",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload 5mb.png -> Expect: success",
              "timedOut": false,
              "duration": 4609,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {},
              "uuid": "67c7a36e-5e1e-4d11-990d-fa9d3f3653b6",
              "parentUUID": "8d7f85fb-a107-4d24-a93d-7c7ca3662945",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload 6mb.png -> Expect: error",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload 6mb.png -> Expect: error",
              "timedOut": false,
              "duration": 6958,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {
                "message": "AssertionError: Bug Found: App allowed 6mb.png: expected 'License uploaded successfully' to not include 'License uploaded successfully'",
                "estack": "AssertionError: Bug Found: App allowed 6mb.png: expected 'License uploaded successfully' to not include 'License uploaded successfully'\n    at Context.<anonymous> (automation\\company_vehicle_tests.js:109:44)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "7d299751-e135-4fb5-9b4f-125ed0efb425",
              "parentUUID": "8d7f85fb-a107-4d24-a93d-7c7ca3662945",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload jpg1kb.jpeg -> Expect: success",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload jpg1kb.jpeg -> Expect: success",
              "timedOut": false,
              "duration": 1139,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {},
              "uuid": "ba24f1bb-34eb-4503-92d6-350938e01c2e",
              "parentUUID": "8d7f85fb-a107-4d24-a93d-7c7ca3662945",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload png300kb.png -> Expect: success",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload png300kb.png -> Expect: success",
              "timedOut": false,
              "duration": 2450,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {},
              "uuid": "6b5268ac-6fb3-47fb-b5a2-d1a74d3d5771",
              "parentUUID": "8d7f85fb-a107-4d24-a93d-7c7ca3662945",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "567c8307-7385-48b7-9f9c-234ff237ef60",
            "d362414c-d9e7-44df-8379-934335a714e0",
            "f1412698-b27b-4db6-a6e0-bf8c2f36cb77",
            "67c7a36e-5e1e-4d11-990d-fa9d3f3653b6",
            "ba24f1bb-34eb-4503-92d6-350938e01c2e",
            "6b5268ac-6fb3-47fb-b5a2-d1a74d3d5771"
          ],
          "failures": [
            "7d299751-e135-4fb5-9b4f-125ed0efb425"
          ],
          "pending": [],
          "skipped": [],
          "duration": 20366,
          "root": false,
          "rootEmpty": false,
          "_timeout": 60000
        },
        {
          "uuid": "6f5d5911-1120-4ba9-97df-53f1c78e8215",
          "title": "TC-04: Driver Vehicle Reservation & Date Rules",
          "fullFile": "C:\\aaFERI\\PREDMETI\\3. Semestar\\VUI\\App\\RIRSsolo\\automation\\driver_reservation_tests.js",
          "file": "\\automation\\driver_reservation_tests.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"TC-04: Driver Vehicle Reservation & Date Rules\"",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules \"before all\" hook in \"TC-04: Driver Vehicle Reservation & Date Rules\"",
              "timedOut": false,
              "duration": 604,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "let options = new chrome.Options();\noptions.addArguments('--remote-allow-origins=*');\noptions.addArguments('--disable-search-engine-choice-screen');\noptions.addArguments('--start-maximized');\ndriver = await new Builder().forBrowser('chrome').setChromeOptions(options).build();",
              "err": {},
              "uuid": "91719bf0-b2ea-49d2-8f82-1c56a4ecd1fa",
              "parentUUID": "6f5d5911-1120-4ba9-97df-53f1c78e8215",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"TC-04: Driver Vehicle Reservation & Date Rules\"",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules \"after all\" hook in \"TC-04: Driver Vehicle Reservation & Date Rules\"",
              "timedOut": false,
              "duration": 1087,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (driver) {\n    // Final Safety Net Cleanup\n    await cleanupReservation(driver);\n    await driver.quit();\n}",
              "err": {},
              "uuid": "5afe03b0-8b40-43dc-ad0c-e58c9b4af01b",
              "parentUUID": "6f5d5911-1120-4ba9-97df-53f1c78e8215",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "Step 1: Login as Driver",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 1: Login as Driver",
              "timedOut": false,
              "duration": 1575,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await driver.get(APP_URL);\nconst emailInput = await driver.wait(until.elementLocated(By.css('input[type=\"email\"]')), 10000);\nawait emailInput.sendKeys(DRIVER_EMAIL);\nawait driver.findElement(By.css('input[type=\"password\"]')).sendKeys(DRIVER_PASS);\nawait driver.findElement(By.className('login-button')).click();\nawait driver.wait(until.elementLocated(By.xpath(\"//button[text()='Reserve Vehicle']\")), 10000);",
              "err": {},
              "uuid": "b4d6b8c0-0c0c-4f7b-a492-134e658fd356",
              "parentUUID": "6f5d5911-1120-4ba9-97df-53f1c78e8215",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 2: Navigate to Vehicle List",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 2: Navigate to Vehicle List",
              "timedOut": false,
              "duration": 1135,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const reserveBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve Vehicle']\"));\nawait reserveBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 10000);\nawait driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);",
              "err": {},
              "uuid": "6e78e8d6-1330-46e1-bb20-67bc35454ff6",
              "parentUUID": "6f5d5911-1120-4ba9-97df-53f1c78e8215",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 1. Valid: Start Today, End Tomorrow -> Expect: success",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 3: 1. Valid: Start Today, End Tomorrow -> Expect: success",
              "timedOut": false,
              "duration": 4214,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn't leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className('reserve-button'));\n    if (reserveBtns.length === 0) {\n        throw new Error(\"No available vehicles to reserve! Previous cleanup might have failed.\");\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\"arguments[0].scrollIntoView(true);\", firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Reserve Vehicle']\")), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve']\"));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === 'success') {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n            // Verify \"Remove Reserve\" button appears\n            await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Remove Reserve']\")), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\"Reserve Vehicle\")) {\n                 let msg = \"Unknown\";\n                 try { msg = await driver.findElement(By.className('profile-message')).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName('h2'));\n        let headerText = headers.length > 0 ? await headers[0].getText() : \"\";\n        if (headerText.includes('List of All Vehicles')) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className('profile-message')), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === 'success') {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}",
              "err": {},
              "uuid": "50a8dc36-c0ff-408b-81b8-37bc2eb13ab2",
              "parentUUID": "6f5d5911-1120-4ba9-97df-53f1c78e8215",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 2. Valid: Start Today, End +30 days -> Expect: success",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 3: 2. Valid: Start Today, End +30 days -> Expect: success",
              "timedOut": false,
              "duration": 4242,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn't leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className('reserve-button'));\n    if (reserveBtns.length === 0) {\n        throw new Error(\"No available vehicles to reserve! Previous cleanup might have failed.\");\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\"arguments[0].scrollIntoView(true);\", firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Reserve Vehicle']\")), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve']\"));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === 'success') {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n            // Verify \"Remove Reserve\" button appears\n            await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Remove Reserve']\")), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\"Reserve Vehicle\")) {\n                 let msg = \"Unknown\";\n                 try { msg = await driver.findElement(By.className('profile-message')).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName('h2'));\n        let headerText = headers.length > 0 ? await headers[0].getText() : \"\";\n        if (headerText.includes('List of All Vehicles')) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className('profile-message')), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === 'success') {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}",
              "err": {},
              "uuid": "5d1e1f9c-a025-4756-a52a-e387e5eb8e2e",
              "parentUUID": "6f5d5911-1120-4ba9-97df-53f1c78e8215",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 3. Invalid: Start Today, End Today (0 days) -> Expect: error",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 3: 3. Invalid: Start Today, End Today (0 days) -> Expect: error",
              "timedOut": false,
              "duration": 4632,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn't leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className('reserve-button'));\n    if (reserveBtns.length === 0) {\n        throw new Error(\"No available vehicles to reserve! Previous cleanup might have failed.\");\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\"arguments[0].scrollIntoView(true);\", firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Reserve Vehicle']\")), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve']\"));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === 'success') {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n            // Verify \"Remove Reserve\" button appears\n            await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Remove Reserve']\")), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\"Reserve Vehicle\")) {\n                 let msg = \"Unknown\";\n                 try { msg = await driver.findElement(By.className('profile-message')).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName('h2'));\n        let headerText = headers.length > 0 ? await headers[0].getText() : \"\";\n        if (headerText.includes('List of All Vehicles')) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className('profile-message')), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === 'success') {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}",
              "err": {
                "message": "Error: Bug Found: App allowed invalid reservation duration (0 days).",
                "estack": "Error: Bug Found: App allowed invalid reservation duration (0 days).\n    at Context.<anonymous> (automation\\driver_reservation_tests.js:166:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "06e1fc5b-bb0a-4245-b9b8-65be2bed8813",
              "parentUUID": "6f5d5911-1120-4ba9-97df-53f1c78e8215",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 4. Invalid: Start Today, End +31 days -> Expect: error",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 3: 4. Invalid: Start Today, End +31 days -> Expect: error",
              "timedOut": false,
              "duration": 4601,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn't leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className('reserve-button'));\n    if (reserveBtns.length === 0) {\n        throw new Error(\"No available vehicles to reserve! Previous cleanup might have failed.\");\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\"arguments[0].scrollIntoView(true);\", firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Reserve Vehicle']\")), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve']\"));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === 'success') {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n            // Verify \"Remove Reserve\" button appears\n            await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Remove Reserve']\")), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\"Reserve Vehicle\")) {\n                 let msg = \"Unknown\";\n                 try { msg = await driver.findElement(By.className('profile-message')).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName('h2'));\n        let headerText = headers.length > 0 ? await headers[0].getText() : \"\";\n        if (headerText.includes('List of All Vehicles')) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className('profile-message')), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === 'success') {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}",
              "err": {
                "message": "Error: Bug Found: App allowed invalid reservation duration (31 days).",
                "estack": "Error: Bug Found: App allowed invalid reservation duration (31 days).\n    at Context.<anonymous> (automation\\driver_reservation_tests.js:166:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "dacc4b04-9873-4343-a11b-578c70f530cd",
              "parentUUID": "6f5d5911-1120-4ba9-97df-53f1c78e8215",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "b4d6b8c0-0c0c-4f7b-a492-134e658fd356",
            "6e78e8d6-1330-46e1-bb20-67bc35454ff6",
            "50a8dc36-c0ff-408b-81b8-37bc2eb13ab2",
            "5d1e1f9c-a025-4756-a52a-e387e5eb8e2e"
          ],
          "failures": [
            "06e1fc5b-bb0a-4245-b9b8-65be2bed8813",
            "dacc4b04-9873-4343-a11b-578c70f530cd"
          ],
          "pending": [],
          "skipped": [],
          "duration": 20399,
          "root": false,
          "rootEmpty": false,
          "_timeout": 60000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 2000
    }
  ],
  "meta": {
    "mocha": {
      "version": "11.7.5"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "full-report",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.4"
    },
    "marge": {
      "options": {
        "reportDir": "test-report",
        "reportFilename": "full-report",
        "overwrite": "true"
      },
      "version": "6.3.2"
    }
  }
}