{
  "stats": {
    "suites": 3,
    "tests": 21,
    "passes": 16,
    "pending": 0,
    "failures": 5,
    "start": "2025-11-25T10:01:09.750Z",
    "end": "2025-11-25T10:02:21.876Z",
    "duration": 72126,
    "testsRegistered": 21,
    "passPercent": 76.19047619047619,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "70217557-a3f1-43b9-8730-9cdda1a95517",
      "title": "",
      "fullFile": "",
      "file": "",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "ec97e7e2-e234-4e76-b5e7-de1dff35751b",
          "title": "TC-02: Company Vehicle Management - Driver License Upload",
          "fullFile": "C:\\aaFERI\\PREDMETI\\3. Semestar\\VUI\\App\\RIRSsolo\\automation\\TC02.js",
          "file": "\\automation\\TC02.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"TC-02: Company Vehicle Management - Driver License Upload\"",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload \"before all\" hook in \"TC-02: Company Vehicle Management - Driver License Upload\"",
              "timedOut": false,
              "duration": 620,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "let options = new chrome.Options();\noptions.addArguments('--remote-allow-origins=*'); \noptions.addArguments('--disable-search-engine-choice-screen'); \noptions.addArguments('--start-maximized');\ndriver = await new Builder()\n    .forBrowser('chrome')\n    .setChromeOptions(options)\n    .build();",
              "err": {},
              "uuid": "8503c27f-e1e3-47da-8478-63ff2d2d5082",
              "parentUUID": "ec97e7e2-e234-4e76-b5e7-de1dff35751b",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"TC-02: Company Vehicle Management - Driver License Upload\"",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload \"after all\" hook in \"TC-02: Company Vehicle Management - Driver License Upload\"",
              "timedOut": false,
              "duration": 38,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (driver) await driver.quit();",
              "err": {},
              "uuid": "505fe7a5-9f62-4f45-b928-654e9b361af3",
              "parentUUID": "ec97e7e2-e234-4e76-b5e7-de1dff35751b",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "Step 1: Login as Driver",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 1: Login as Driver",
              "timedOut": false,
              "duration": 1615,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await driver.get(APP_URL);\n\nconst emailInput = await driver.wait(until.elementLocated(By.css('input[type=\"email\"]')), 10000);\nconst passInput = await driver.findElement(By.css('input[type=\"password\"]'));\n\nawait emailInput.sendKeys(DRIVER_EMAIL);\nawait passInput.sendKeys(DRIVER_PASS);\n\nconst loginBtn = await driver.findElement(By.className('login-button'));\nawait loginBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 10000);",
              "err": {},
              "uuid": "6088e0b6-c6f8-43e4-b816-53ae1f58ff6c",
              "parentUUID": "ec97e7e2-e234-4e76-b5e7-de1dff35751b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 2: Navigate to Profile",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 2: Navigate to Profile",
              "timedOut": false,
              "duration": 78,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const profileBtn = await driver.findElement(By.xpath(\"//button[text()='View Profile']\"));\nawait profileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 10000);",
              "err": {},
              "uuid": "33b18374-be53-46fb-a1c5-cf6694e9d9b6",
              "parentUUID": "ec97e7e2-e234-4e76-b5e7-de1dff35751b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload 1mb.docx -> Expect: error",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload 1mb.docx -> Expect: error",
              "timedOut": false,
              "duration": 3139,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {},
              "uuid": "6c06d845-9cbd-453b-8cf6-d19b36fedee6",
              "parentUUID": "ec97e7e2-e234-4e76-b5e7-de1dff35751b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload 5mb.png -> Expect: success",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload 5mb.png -> Expect: success",
              "timedOut": false,
              "duration": 4869,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {},
              "uuid": "cac42b7f-5a46-4c3e-b850-bf71bc4aed62",
              "parentUUID": "ec97e7e2-e234-4e76-b5e7-de1dff35751b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload 6mb.png -> Expect: error",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload 6mb.png -> Expect: error",
              "timedOut": false,
              "duration": 6507,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {
                "message": "AssertionError: Bug Found: App allowed 6mb.png: expected 'License uploaded successfully' to not include 'License uploaded successfully'",
                "estack": "AssertionError: Bug Found: App allowed 6mb.png: expected 'License uploaded successfully' to not include 'License uploaded successfully'\n    at Context.<anonymous> (automation\\TC02.js:109:44)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "75f54758-523e-4999-8b6e-457b3d13fe35",
              "parentUUID": "ec97e7e2-e234-4e76-b5e7-de1dff35751b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload jpg1kb.jpeg -> Expect: success",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload jpg1kb.jpeg -> Expect: success",
              "timedOut": false,
              "duration": 1269,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {},
              "uuid": "e3828ec6-59eb-43be-8ec7-b7dced30b21e",
              "parentUUID": "ec97e7e2-e234-4e76-b5e7-de1dff35751b",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload png300kb.png -> Expect: success",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload png300kb.png -> Expect: success",
              "timedOut": false,
              "duration": 2490,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {},
              "uuid": "f0769b37-da9c-422b-86e7-d82e17765ac0",
              "parentUUID": "ec97e7e2-e234-4e76-b5e7-de1dff35751b",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "6088e0b6-c6f8-43e4-b816-53ae1f58ff6c",
            "33b18374-be53-46fb-a1c5-cf6694e9d9b6",
            "6c06d845-9cbd-453b-8cf6-d19b36fedee6",
            "cac42b7f-5a46-4c3e-b850-bf71bc4aed62",
            "e3828ec6-59eb-43be-8ec7-b7dced30b21e",
            "f0769b37-da9c-422b-86e7-d82e17765ac0"
          ],
          "failures": [
            "75f54758-523e-4999-8b6e-457b3d13fe35"
          ],
          "pending": [],
          "skipped": [],
          "duration": 19967,
          "root": false,
          "rootEmpty": false,
          "_timeout": 60000
        },
        {
          "uuid": "50ec02a7-2aae-4644-b1c0-ab4bedeafb19",
          "title": "TC-03: Admin Add Vehicle & Filtering Validation",
          "fullFile": "C:\\aaFERI\\PREDMETI\\3. Semestar\\VUI\\App\\RIRSsolo\\automation\\TC03.js",
          "file": "\\automation\\TC03.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"TC-03: Admin Add Vehicle & Filtering Validation\"",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation \"before all\" hook in \"TC-03: Admin Add Vehicle & Filtering Validation\"",
              "timedOut": false,
              "duration": 663,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "let options = new chrome.Options();\noptions.addArguments('--remote-allow-origins=*');\noptions.addArguments('--disable-search-engine-choice-screen');\noptions.addArguments('--start-maximized');\ndriver = await new Builder().forBrowser('chrome').setChromeOptions(options).build();",
              "err": {},
              "uuid": "a438fd55-430c-4b82-b7c1-41a00f8b6275",
              "parentUUID": "50ec02a7-2aae-4644-b1c0-ab4bedeafb19",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"TC-03: Admin Add Vehicle & Filtering Validation\"",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation \"after all\" hook in \"TC-03: Admin Add Vehicle & Filtering Validation\"",
              "timedOut": false,
              "duration": 11308,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (!driver) return;\nconsole.log('\\n   [Cleanup] Starting \"Search & Destroy\" Sequence...');\ntry {\n    // 1. Force Reset to Dashboard to ensure we aren't stuck on an Error page\n    await driver.get(APP_URL);\n    await driver.sleep(1000);\n    // 2. Safety Net: Re-login if session was lost\n    const loginInputs = await driver.findElements(By.css('input[type=\"email\"]'));\n    if (loginInputs.length > 0) {\n        console.log(\"   [Cleanup] Session lost. Re-logging in...\");\n        await loginInputs[0].sendKeys(ADMIN_EMAIL);\n        await driver.findElement(By.css('input[type=\"password\"]')).sendKeys(ADMIN_PASS);\n        await driver.findElement(By.className('login-button')).click();\n        await driver.sleep(1000);\n    }\n    // 3. Navigate to List\n    const viewBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Vehicles']\")), 5000);\n    await viewBtn.click();\n    \n    // 4. Wait for Table to Render\n    await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n    // 5. DELETE LOOP\n    for (const tc of testCases) {\n        const name = tc.data.name;\n        // Loop until no rows with this name exist\n        while (true) {\n            try {\n                // Find row with name\n                const xpath = `//tr[td[contains(text(), '${name}')]]//button[text()='Delete']`;\n                const btns = await driver.findElements(By.xpath(xpath));\n                if (btns.length === 0) break; // Clean!\n                // Delete found instance\n                const btn = btns[0];\n                await driver.executeScript(\"arguments[0].scrollIntoView(true);\", btn);\n                await btn.click();\n                console.log(`   [Cleanup] Deleted residual: ${name}`);\n                \n                // Wait for refresh\n                await driver.sleep(1500);\n            } catch (e) {\n                break; // Move to next name on error\n            }\n        }\n    }\n} catch (e) {\n    console.error(\"   [Cleanup Error] Could not complete cleanup:\", e.message);\n} finally {\n    await driver.quit();\n}",
              "err": {},
              "uuid": "38f13608-fda3-490f-b2f9-4ab67c191f15",
              "parentUUID": "50ec02a7-2aae-4644-b1c0-ab4bedeafb19",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "Step 1: Login as Admin",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 1: Login as Admin",
              "timedOut": false,
              "duration": 1621,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await driver.get(APP_URL);\nconst emailInput = await driver.wait(until.elementLocated(By.css('input[type=\"email\"]')), 10000);\nconst passInput = await driver.findElement(By.css('input[type=\"password\"]'));\nawait emailInput.sendKeys(ADMIN_EMAIL);\nawait passInput.sendKeys(ADMIN_PASS);\nconst loginBtn = await driver.findElement(By.className('login-button'));\nawait loginBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Vehicles']\")), 10000);",
              "err": {},
              "uuid": "995e5fd9-c1c3-4afa-b131-a0235a0117e5",
              "parentUUID": "50ec02a7-2aae-4644-b1c0-ab4bedeafb19",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 2: Navigate to Vehicle List",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 2: Navigate to Vehicle List",
              "timedOut": false,
              "duration": 83,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const viewVehiclesBtn = await driver.findElement(By.xpath(\"//button[text()='View Vehicles']\"));\nawait viewVehiclesBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 10000);",
              "err": {},
              "uuid": "c96a3a17-a6ad-4936-8d47-2105453d4676",
              "parentUUID": "50ec02a7-2aae-4644-b1c0-ab4bedeafb19",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 1. Lower Boundaries (Valid) -> Expect: success",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 1. Lower Boundaries (Valid) -> Expect: success",
              "timedOut": false,
              "duration": 2367,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {},
              "uuid": "7a037bcd-c156-471b-b6bd-102afa6befe9",
              "parentUUID": "50ec02a7-2aae-4644-b1c0-ab4bedeafb19",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 2. Upper Boundaries (Valid) -> Expect: success",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 2. Upper Boundaries (Valid) -> Expect: success",
              "timedOut": false,
              "duration": 1692,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {},
              "uuid": "95089a23-5985-4b15-a281-9d8fe2867013",
              "parentUUID": "50ec02a7-2aae-4644-b1c0-ab4bedeafb19",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 3. Invalid Year (1989) -> Expect: error",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 3. Invalid Year (1989) -> Expect: error",
              "timedOut": false,
              "duration": 3621,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {
                "message": "Error: Expected error message not found.",
                "estack": "Error: Expected error message not found.\n    at Context.<anonymous> (automation\\TC03.js:164:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "62b9fd85-fa52-40eb-a275-7b11e57141ba",
              "parentUUID": "50ec02a7-2aae-4644-b1c0-ab4bedeafb19",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 4. Invalid HP (39) -> Expect: error",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 4. Invalid HP (39) -> Expect: error",
              "timedOut": false,
              "duration": 3703,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {
                "message": "Error: Expected error message not found.",
                "estack": "Error: Expected error message not found.\n    at Context.<anonymous> (automation\\TC03.js:164:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "4fef8818-63af-4971-a032-7022acfea117",
              "parentUUID": "50ec02a7-2aae-4644-b1c0-ab4bedeafb19",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 5. Missing Field (Color) -> Expect: error",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 5. Missing Field (Color) -> Expect: error",
              "timedOut": false,
              "duration": 2544,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {},
              "uuid": "9be61797-e4a4-4c42-897b-d0d38eb2b9e5",
              "parentUUID": "50ec02a7-2aae-4644-b1c0-ab4bedeafb19",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 6. Capitalized Color (Valid + Filter Check) -> Expect: success",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 6. Capitalized Color (Valid + Filter Check) -> Expect: success",
              "timedOut": false,
              "duration": 1582,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {},
              "uuid": "d915c6ef-ba99-49d7-bbb0-1758dcbd3290",
              "parentUUID": "50ec02a7-2aae-4644-b1c0-ab4bedeafb19",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "995e5fd9-c1c3-4afa-b131-a0235a0117e5",
            "c96a3a17-a6ad-4936-8d47-2105453d4676",
            "7a037bcd-c156-471b-b6bd-102afa6befe9",
            "95089a23-5985-4b15-a281-9d8fe2867013",
            "9be61797-e4a4-4c42-897b-d0d38eb2b9e5",
            "d915c6ef-ba99-49d7-bbb0-1758dcbd3290"
          ],
          "failures": [
            "62b9fd85-fa52-40eb-a275-7b11e57141ba",
            "4fef8818-63af-4971-a032-7022acfea117"
          ],
          "pending": [],
          "skipped": [],
          "duration": 17213,
          "root": false,
          "rootEmpty": false,
          "_timeout": 60000
        },
        {
          "uuid": "8df3d8b1-6d91-4ec2-bb4d-41adc16b0ec6",
          "title": "TC-04: Driver Vehicle Reservation & Date Rules",
          "fullFile": "C:\\aaFERI\\PREDMETI\\3. Semestar\\VUI\\App\\RIRSsolo\\automation\\TC04.js",
          "file": "\\automation\\TC04.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"TC-04: Driver Vehicle Reservation & Date Rules\"",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules \"before all\" hook in \"TC-04: Driver Vehicle Reservation & Date Rules\"",
              "timedOut": false,
              "duration": 696,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "let options = new chrome.Options();\noptions.addArguments('--remote-allow-origins=*');\noptions.addArguments('--disable-search-engine-choice-screen');\noptions.addArguments('--start-maximized');\ndriver = await new Builder().forBrowser('chrome').setChromeOptions(options).build();",
              "err": {},
              "uuid": "0c2ffb5b-269f-42dd-b2e9-58c60ab91a2e",
              "parentUUID": "8df3d8b1-6d91-4ec2-bb4d-41adc16b0ec6",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"TC-04: Driver Vehicle Reservation & Date Rules\"",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules \"after all\" hook in \"TC-04: Driver Vehicle Reservation & Date Rules\"",
              "timedOut": false,
              "duration": 1082,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (driver) {\n    // Final Safety Net Cleanup\n    await cleanupReservation(driver);\n    await driver.quit();\n}",
              "err": {},
              "uuid": "ad8a7e57-8ba1-4898-bc6c-d0a2f2f0edc6",
              "parentUUID": "8df3d8b1-6d91-4ec2-bb4d-41adc16b0ec6",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "Step 1: Login as Driver",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 1: Login as Driver",
              "timedOut": false,
              "duration": 1643,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await driver.get(APP_URL);\nconst emailInput = await driver.wait(until.elementLocated(By.css('input[type=\"email\"]')), 10000);\nawait emailInput.sendKeys(DRIVER_EMAIL);\nawait driver.findElement(By.css('input[type=\"password\"]')).sendKeys(DRIVER_PASS);\nawait driver.findElement(By.className('login-button')).click();\nawait driver.wait(until.elementLocated(By.xpath(\"//button[text()='Reserve Vehicle']\")), 10000);",
              "err": {},
              "uuid": "aa862251-63cb-4cb2-ba9c-c5cf20e85c70",
              "parentUUID": "8df3d8b1-6d91-4ec2-bb4d-41adc16b0ec6",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 2: Navigate to Vehicle List",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 2: Navigate to Vehicle List",
              "timedOut": false,
              "duration": 945,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const reserveBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve Vehicle']\"));\nawait reserveBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 10000);\nawait driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);",
              "err": {},
              "uuid": "4e948a7a-c40e-4c87-b04a-6919e64e5633",
              "parentUUID": "8df3d8b1-6d91-4ec2-bb4d-41adc16b0ec6",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 1. Valid: Start Today, End Tomorrow -> Expect: success",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 3: 1. Valid: Start Today, End Tomorrow -> Expect: success",
              "timedOut": false,
              "duration": 4346,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn't leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className('reserve-button'));\n    if (reserveBtns.length === 0) {\n        throw new Error(\"No available vehicles to reserve! Previous cleanup might have failed.\");\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\"arguments[0].scrollIntoView(true);\", firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Reserve Vehicle']\")), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve']\"));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === 'success') {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n            // Verify \"Remove Reserve\" button appears\n            await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Remove Reserve']\")), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\"Reserve Vehicle\")) {\n                 let msg = \"Unknown\";\n                 try { msg = await driver.findElement(By.className('profile-message')).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName('h2'));\n        let headerText = headers.length > 0 ? await headers[0].getText() : \"\";\n        if (headerText.includes('List of All Vehicles')) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className('profile-message')), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === 'success') {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}",
              "err": {},
              "uuid": "91953321-bbe0-4da3-abe8-35d6804737a0",
              "parentUUID": "8df3d8b1-6d91-4ec2-bb4d-41adc16b0ec6",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 2. Valid: Start Today, End +30 days -> Expect: success",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 3: 2. Valid: Start Today, End +30 days -> Expect: success",
              "timedOut": false,
              "duration": 4265,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn't leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className('reserve-button'));\n    if (reserveBtns.length === 0) {\n        throw new Error(\"No available vehicles to reserve! Previous cleanup might have failed.\");\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\"arguments[0].scrollIntoView(true);\", firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Reserve Vehicle']\")), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve']\"));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === 'success') {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n            // Verify \"Remove Reserve\" button appears\n            await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Remove Reserve']\")), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\"Reserve Vehicle\")) {\n                 let msg = \"Unknown\";\n                 try { msg = await driver.findElement(By.className('profile-message')).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName('h2'));\n        let headerText = headers.length > 0 ? await headers[0].getText() : \"\";\n        if (headerText.includes('List of All Vehicles')) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className('profile-message')), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === 'success') {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}",
              "err": {},
              "uuid": "4baac4ce-1d41-4978-82ae-e476261736d2",
              "parentUUID": "8df3d8b1-6d91-4ec2-bb4d-41adc16b0ec6",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 3. Invalid: Start Today, End Today (0 days) -> Expect: error",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 3: 3. Invalid: Start Today, End Today (0 days) -> Expect: error",
              "timedOut": false,
              "duration": 4622,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn't leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className('reserve-button'));\n    if (reserveBtns.length === 0) {\n        throw new Error(\"No available vehicles to reserve! Previous cleanup might have failed.\");\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\"arguments[0].scrollIntoView(true);\", firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Reserve Vehicle']\")), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve']\"));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === 'success') {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n            // Verify \"Remove Reserve\" button appears\n            await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Remove Reserve']\")), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\"Reserve Vehicle\")) {\n                 let msg = \"Unknown\";\n                 try { msg = await driver.findElement(By.className('profile-message')).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName('h2'));\n        let headerText = headers.length > 0 ? await headers[0].getText() : \"\";\n        if (headerText.includes('List of All Vehicles')) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className('profile-message')), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === 'success') {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}",
              "err": {
                "message": "Error: Bug Found: App allowed invalid reservation duration (0 days).",
                "estack": "Error: Bug Found: App allowed invalid reservation duration (0 days).\n    at Context.<anonymous> (automation\\TC04.js:166:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "d9315402-bca0-49df-a034-934fbb136d28",
              "parentUUID": "8df3d8b1-6d91-4ec2-bb4d-41adc16b0ec6",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 4. Invalid: Start Today, End +31 days -> Expect: error",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 3: 4. Invalid: Start Today, End +31 days -> Expect: error",
              "timedOut": false,
              "duration": 4702,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn't leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className('reserve-button'));\n    if (reserveBtns.length === 0) {\n        throw new Error(\"No available vehicles to reserve! Previous cleanup might have failed.\");\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\"arguments[0].scrollIntoView(true);\", firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Reserve Vehicle']\")), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve']\"));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === 'success') {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n            // Verify \"Remove Reserve\" button appears\n            await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Remove Reserve']\")), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\"Reserve Vehicle\")) {\n                 let msg = \"Unknown\";\n                 try { msg = await driver.findElement(By.className('profile-message')).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName('h2'));\n        let headerText = headers.length > 0 ? await headers[0].getText() : \"\";\n        if (headerText.includes('List of All Vehicles')) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className('profile-message')), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === 'success') {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}",
              "err": {
                "message": "Error: Bug Found: App allowed invalid reservation duration (31 days).",
                "estack": "Error: Bug Found: App allowed invalid reservation duration (31 days).\n    at Context.<anonymous> (automation\\TC04.js:166:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "8c4caddb-c697-482e-b0e1-c34c3962e072",
              "parentUUID": "8df3d8b1-6d91-4ec2-bb4d-41adc16b0ec6",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "aa862251-63cb-4cb2-ba9c-c5cf20e85c70",
            "4e948a7a-c40e-4c87-b04a-6919e64e5633",
            "91953321-bbe0-4da3-abe8-35d6804737a0",
            "4baac4ce-1d41-4978-82ae-e476261736d2"
          ],
          "failures": [
            "d9315402-bca0-49df-a034-934fbb136d28",
            "8c4caddb-c697-482e-b0e1-c34c3962e072"
          ],
          "pending": [],
          "skipped": [],
          "duration": 20523,
          "root": false,
          "rootEmpty": false,
          "_timeout": 60000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 2000
    }
  ],
  "meta": {
    "mocha": {
      "version": "11.7.5"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "full-report",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.4"
    },
    "marge": {
      "options": {
        "reportDir": "test-report",
        "reportFilename": "full-report",
        "overwrite": "true"
      },
      "version": "6.3.2"
    }
  }
}