{
  "stats": {
    "suites": 3,
    "tests": 21,
    "passes": 16,
    "pending": 0,
    "failures": 5,
    "start": "2025-11-25T10:07:56.264Z",
    "end": "2025-11-25T10:09:10.058Z",
    "duration": 73794,
    "testsRegistered": 21,
    "passPercent": 76.19047619047619,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "bfeeaba8-44b8-436a-b8dc-6f416e8e82c0",
      "title": "",
      "fullFile": "",
      "file": "",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "3adeb4a0-0f4f-4714-8613-9538ae20ed16",
          "title": "TC-02: Company Vehicle Management - Driver License Upload",
          "fullFile": "C:\\aaFERI\\PREDMETI\\3. Semestar\\VUI\\App\\RIRSsolo\\automation\\TC02.js",
          "file": "\\automation\\TC02.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"TC-02: Company Vehicle Management - Driver License Upload\"",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload \"before all\" hook in \"TC-02: Company Vehicle Management - Driver License Upload\"",
              "timedOut": false,
              "duration": 558,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "let options = new chrome.Options();\noptions.addArguments('--remote-allow-origins=*'); \noptions.addArguments('--disable-search-engine-choice-screen'); \noptions.addArguments('--start-maximized');\ndriver = await new Builder()\n    .forBrowser('chrome')\n    .setChromeOptions(options)\n    .build();",
              "err": {},
              "uuid": "18afcde1-d58f-4e11-be4e-2a38d8675d85",
              "parentUUID": "3adeb4a0-0f4f-4714-8613-9538ae20ed16",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"TC-02: Company Vehicle Management - Driver License Upload\"",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload \"after all\" hook in \"TC-02: Company Vehicle Management - Driver License Upload\"",
              "timedOut": false,
              "duration": 38,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (driver) await driver.quit();",
              "err": {},
              "uuid": "4c3e0915-81b5-4750-8d26-ad9f9a94ae57",
              "parentUUID": "3adeb4a0-0f4f-4714-8613-9538ae20ed16",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "Step 1: Login as Driver",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 1: Login as Driver",
              "timedOut": false,
              "duration": 1641,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await driver.get(APP_URL);\n\nconst emailInput = await driver.wait(until.elementLocated(By.css('input[type=\"email\"]')), 10000);\nconst passInput = await driver.findElement(By.css('input[type=\"password\"]'));\n\nawait emailInput.sendKeys(DRIVER_EMAIL);\nawait passInput.sendKeys(DRIVER_PASS);\n\nconst loginBtn = await driver.findElement(By.className('login-button'));\nawait loginBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 10000);",
              "err": {},
              "uuid": "4f0ceab5-f58f-4ec0-a20d-a4d6d2004ea6",
              "parentUUID": "3adeb4a0-0f4f-4714-8613-9538ae20ed16",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 2: Navigate to Profile",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 2: Navigate to Profile",
              "timedOut": false,
              "duration": 65,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const profileBtn = await driver.findElement(By.xpath(\"//button[text()='View Profile']\"));\nawait profileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 10000);",
              "err": {},
              "uuid": "731cd217-e270-4c7c-93f8-655b0ded817b",
              "parentUUID": "3adeb4a0-0f4f-4714-8613-9538ae20ed16",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload 1mb.docx -> Expect: error",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload 1mb.docx -> Expect: error",
              "timedOut": false,
              "duration": 3354,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {},
              "uuid": "bfce07d4-b0fb-429f-9cae-1d837f308fa8",
              "parentUUID": "3adeb4a0-0f4f-4714-8613-9538ae20ed16",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload 5mb.png -> Expect: success",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload 5mb.png -> Expect: success",
              "timedOut": false,
              "duration": 5294,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {},
              "uuid": "19a72b77-d486-44af-adf9-3588ca92621c",
              "parentUUID": "3adeb4a0-0f4f-4714-8613-9538ae20ed16",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload 6mb.png -> Expect: error",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload 6mb.png -> Expect: error",
              "timedOut": false,
              "duration": 5648,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {
                "message": "AssertionError: Bug Found: App allowed 6mb.png: expected 'License uploaded successfully' to not include 'License uploaded successfully'",
                "estack": "AssertionError: Bug Found: App allowed 6mb.png: expected 'License uploaded successfully' to not include 'License uploaded successfully'\n    at Context.<anonymous> (automation\\TC02.js:109:44)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "2c56c9a7-0e44-495c-a7eb-a4408edda702",
              "parentUUID": "3adeb4a0-0f4f-4714-8613-9538ae20ed16",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload jpg1kb.jpeg -> Expect: success",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload jpg1kb.jpeg -> Expect: success",
              "timedOut": false,
              "duration": 1148,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {},
              "uuid": "264c88ec-6793-42e0-952c-fdb85d1efd55",
              "parentUUID": "3adeb4a0-0f4f-4714-8613-9538ae20ed16",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: Upload png300kb.png -> Expect: success",
              "fullTitle": "TC-02: Company Vehicle Management - Driver License Upload Step 3: Upload png300kb.png -> Expect: success",
              "timedOut": false,
              "duration": 3345,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const filePath = path.join(ASSETS_DIR, tc.file);\n\nif (!fs.existsSync(filePath)) throw new Error(`Asset missing: ${filePath}`);\n// 1. Locate and Upload\nconst fileInput = await driver.findElement(By.css('input[type=\"file\"]'));\nawait fileInput.sendKeys(filePath);\nconst uploadBtn = await driver.findElement(By.className('upload-button'));\nawait uploadBtn.click();\n// 2. Wait for message\nconst messageEl = await driver.wait(until.elementLocated(By.className('profile-message')), 15000);\nawait driver.sleep(1000); // Allow text to update\nconst messageText = await messageEl.getText();\n// 3. Assertions\nif (tc.expected === 'success') {\n    expect(messageText).to.include('License uploaded successfully');\n} else {\n    expect(messageText).to.not.include('License uploaded successfully', `Bug Found: App allowed ${tc.file}`);\n}\n// 4. CLEANUP: Reset UI State (Do NOT Refresh)\n// Click \"Back to Dashboard\"\nconst backBtn = await driver.findElement(By.xpath(\"//button[text()='Back to Dashboard']\"));\nawait backBtn.click();\n// Wait for Dashboard\nconst viewProfileBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Profile']\")), 5000);\n\n// Go back to Profile for next test\nawait viewProfileBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h3[contains(text(), 'Update Driver’s License')]\")), 5000);",
              "err": {},
              "uuid": "eef1abeb-1862-430f-9914-39c56829c13f",
              "parentUUID": "3adeb4a0-0f4f-4714-8613-9538ae20ed16",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "4f0ceab5-f58f-4ec0-a20d-a4d6d2004ea6",
            "731cd217-e270-4c7c-93f8-655b0ded817b",
            "bfce07d4-b0fb-429f-9cae-1d837f308fa8",
            "19a72b77-d486-44af-adf9-3588ca92621c",
            "264c88ec-6793-42e0-952c-fdb85d1efd55",
            "eef1abeb-1862-430f-9914-39c56829c13f"
          ],
          "failures": [
            "2c56c9a7-0e44-495c-a7eb-a4408edda702"
          ],
          "pending": [],
          "skipped": [],
          "duration": 20495,
          "root": false,
          "rootEmpty": false,
          "_timeout": 60000
        },
        {
          "uuid": "dee544d9-597d-4556-bc15-86408cacd41a",
          "title": "TC-03: Admin Add Vehicle & Filtering Validation",
          "fullFile": "C:\\aaFERI\\PREDMETI\\3. Semestar\\VUI\\App\\RIRSsolo\\automation\\TC03.js",
          "file": "\\automation\\TC03.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"TC-03: Admin Add Vehicle & Filtering Validation\"",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation \"before all\" hook in \"TC-03: Admin Add Vehicle & Filtering Validation\"",
              "timedOut": false,
              "duration": 559,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "let options = new chrome.Options();\noptions.addArguments('--remote-allow-origins=*');\noptions.addArguments('--disable-search-engine-choice-screen');\noptions.addArguments('--start-maximized');\ndriver = await new Builder().forBrowser('chrome').setChromeOptions(options).build();",
              "err": {},
              "uuid": "1e7ce23e-e4a4-4751-83bb-3da97ef27ceb",
              "parentUUID": "dee544d9-597d-4556-bc15-86408cacd41a",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"TC-03: Admin Add Vehicle & Filtering Validation\"",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation \"after all\" hook in \"TC-03: Admin Add Vehicle & Filtering Validation\"",
              "timedOut": false,
              "duration": 11216,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (!driver) return;\nconsole.log('\\n   [Cleanup] Starting \"Search & Destroy\" Sequence...');\ntry {\n    // 1. Force Reset to Dashboard to ensure we aren't stuck on an Error page\n    await driver.get(APP_URL);\n    await driver.sleep(1000);\n    // 2. Safety Net: Re-login if session was lost\n    const loginInputs = await driver.findElements(By.css('input[type=\"email\"]'));\n    if (loginInputs.length > 0) {\n        console.log(\"   [Cleanup] Session lost. Re-logging in...\");\n        await loginInputs[0].sendKeys(ADMIN_EMAIL);\n        await driver.findElement(By.css('input[type=\"password\"]')).sendKeys(ADMIN_PASS);\n        await driver.findElement(By.className('login-button')).click();\n        await driver.sleep(1000);\n    }\n    // 3. Navigate to List\n    const viewBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Vehicles']\")), 5000);\n    await viewBtn.click();\n    \n    // 4. Wait for Table to Render\n    await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n    // 5. DELETE LOOP\n    for (const tc of testCases) {\n        const name = tc.data.name;\n        // Loop until no rows with this name exist\n        while (true) {\n            try {\n                // Find row with name\n                const xpath = `//tr[td[contains(text(), '${name}')]]//button[text()='Delete']`;\n                const btns = await driver.findElements(By.xpath(xpath));\n                if (btns.length === 0) break; // Clean!\n                // Delete found instance\n                const btn = btns[0];\n                await driver.executeScript(\"arguments[0].scrollIntoView(true);\", btn);\n                await btn.click();\n                console.log(`   [Cleanup] Deleted residual: ${name}`);\n                \n                // Wait for refresh\n                await driver.sleep(1500);\n            } catch (e) {\n                break; // Move to next name on error\n            }\n        }\n    }\n} catch (e) {\n    console.error(\"   [Cleanup Error] Could not complete cleanup:\", e.message);\n} finally {\n    await driver.quit();\n}",
              "err": {},
              "uuid": "bdaf5ff3-e33b-4452-aabb-af369e89f753",
              "parentUUID": "dee544d9-597d-4556-bc15-86408cacd41a",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "Step 1: Login as Admin",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 1: Login as Admin",
              "timedOut": false,
              "duration": 1623,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await driver.get(APP_URL);\nconst emailInput = await driver.wait(until.elementLocated(By.css('input[type=\"email\"]')), 10000);\nconst passInput = await driver.findElement(By.css('input[type=\"password\"]'));\nawait emailInput.sendKeys(ADMIN_EMAIL);\nawait passInput.sendKeys(ADMIN_PASS);\nconst loginBtn = await driver.findElement(By.className('login-button'));\nawait loginBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//button[text()='View Vehicles']\")), 10000);",
              "err": {},
              "uuid": "fcd6fdf9-24a6-4bef-82e7-79f28bc2bede",
              "parentUUID": "dee544d9-597d-4556-bc15-86408cacd41a",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 2: Navigate to Vehicle List",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 2: Navigate to Vehicle List",
              "timedOut": false,
              "duration": 56,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const viewVehiclesBtn = await driver.findElement(By.xpath(\"//button[text()='View Vehicles']\"));\nawait viewVehiclesBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 10000);",
              "err": {},
              "uuid": "edcc2fab-4c8c-4725-a257-54ad21845b0b",
              "parentUUID": "dee544d9-597d-4556-bc15-86408cacd41a",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 1. Lower Boundaries (Valid) -> Expect: success",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 1. Lower Boundaries (Valid) -> Expect: success",
              "timedOut": false,
              "duration": 2733,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {},
              "uuid": "96824f61-397c-4503-84ac-c2fad9d6ea56",
              "parentUUID": "dee544d9-597d-4556-bc15-86408cacd41a",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 2. Upper Boundaries (Valid) -> Expect: success",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 2. Upper Boundaries (Valid) -> Expect: success",
              "timedOut": false,
              "duration": 1827,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {},
              "uuid": "6f4b83a5-5cce-45e0-b6fa-4d90f13e571f",
              "parentUUID": "dee544d9-597d-4556-bc15-86408cacd41a",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 3. Invalid Year (1989) -> Expect: error",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 3. Invalid Year (1989) -> Expect: error",
              "timedOut": false,
              "duration": 3624,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {
                "message": "Error: Expected error message not found.",
                "estack": "Error: Expected error message not found.\n    at Context.<anonymous> (automation\\TC03.js:164:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "ca3fea2f-4a45-40fb-adbb-d5405c5af795",
              "parentUUID": "dee544d9-597d-4556-bc15-86408cacd41a",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 4. Invalid HP (39) -> Expect: error",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 4. Invalid HP (39) -> Expect: error",
              "timedOut": false,
              "duration": 3685,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {
                "message": "Error: Expected error message not found.",
                "estack": "Error: Expected error message not found.\n    at Context.<anonymous> (automation\\TC03.js:164:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "b8776cca-0892-4310-94e3-19eb57639381",
              "parentUUID": "dee544d9-597d-4556-bc15-86408cacd41a",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 5. Missing Field (Color) -> Expect: error",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 5. Missing Field (Color) -> Expect: error",
              "timedOut": false,
              "duration": 2625,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {},
              "uuid": "e13baa2a-6903-4650-9d46-2a4f6e986ad9",
              "parentUUID": "dee544d9-597d-4556-bc15-86408cacd41a",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 6. Capitalized Color (Valid + Filter Check) -> Expect: success",
              "fullTitle": "TC-03: Admin Add Vehicle & Filtering Validation Step 3: 6. Capitalized Color (Valid + Filter Check) -> Expect: success",
              "timedOut": false,
              "duration": 1851,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Navigate to Add Page (Handle potential redirect loops)\nconst addVehicleBtn = await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Add Vehicle']\")), 10000);\nawait driver.sleep(200);\nawait addVehicleBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Add vehicle']\")), 5000);\n// Fill Form\nif (tc.data.name) await driver.findElement(By.css('input[placeholder=\"Vehicle Name\"]')).sendKeys(tc.data.name);\nif (tc.data.color) await driver.findElement(By.css('input[placeholder=\"Vehicle Color\"]')).sendKeys(tc.data.color);\nif (tc.data.year) await driver.findElement(By.css('input[placeholder=\"Vehicle Year\"]')).sendKeys(tc.data.year);\nif (tc.data.engine) await driver.findElement(By.css('input[placeholder=\"Engine\"]')).sendKeys(tc.data.engine);\nif (tc.data.hp) await driver.findElement(By.css('input[placeholder=\"HP\"]')).sendKeys(tc.data.hp);\n// Submit\nconst submitBtn = await driver.findElement(By.xpath(\"//button[text()='Add vehicle']\"));\nawait submitBtn.click();\n// Logic\nif (tc.expected === 'success') {\n    // Success: Expect table\n    try {\n        await driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);\n        const tableText = await driver.findElement(By.className('vehicle-table')).getText();\n        expect(tableText).to.include(tc.data.name);\n    } catch (err) {\n        const pageSource = await driver.getPageSource();\n        if (pageSource.includes(\"Add vehicle\")) throw new Error(`Expected SUCCESS but remained on form.`);\n        throw err;\n    }\n} else {\n    // Error: Expect NO table (stay on Add page)\n    await driver.sleep(1000);\n    const tables = await driver.findElements(By.className('vehicle-table'));\n    \n    if (tables.length > 0) {\n        throw new Error(`Bug Found: System accepted invalid data (${tc.desc}). Vehicle was created.`);\n    } else {\n        // Stayed on Add Page (Correct)\n        try {\n            const errorMsgEl = await driver.wait(until.elementLocated(By.className('error-message')), 2000);\n            expect(await errorMsgEl.getText()).to.not.be.empty;\n            \n            // Reset for next loop\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.className('vehicle-table')), 5000);\n        } catch (e) {\n            throw new Error(`Expected error message not found.`);\n        }\n    }\n}",
              "err": {},
              "uuid": "3321ebb8-635b-48be-bbee-7607ea06f148",
              "parentUUID": "dee544d9-597d-4556-bc15-86408cacd41a",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "fcd6fdf9-24a6-4bef-82e7-79f28bc2bede",
            "edcc2fab-4c8c-4725-a257-54ad21845b0b",
            "96824f61-397c-4503-84ac-c2fad9d6ea56",
            "6f4b83a5-5cce-45e0-b6fa-4d90f13e571f",
            "e13baa2a-6903-4650-9d46-2a4f6e986ad9",
            "3321ebb8-635b-48be-bbee-7607ea06f148"
          ],
          "failures": [
            "ca3fea2f-4a45-40fb-adbb-d5405c5af795",
            "b8776cca-0892-4310-94e3-19eb57639381"
          ],
          "pending": [],
          "skipped": [],
          "duration": 18024,
          "root": false,
          "rootEmpty": false,
          "_timeout": 60000
        },
        {
          "uuid": "d1904b90-72cb-45e3-a7f9-402bf081a4d7",
          "title": "TC-04: Driver Vehicle Reservation & Date Rules",
          "fullFile": "C:\\aaFERI\\PREDMETI\\3. Semestar\\VUI\\App\\RIRSsolo\\automation\\TC04.js",
          "file": "\\automation\\TC04.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"TC-04: Driver Vehicle Reservation & Date Rules\"",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules \"before all\" hook in \"TC-04: Driver Vehicle Reservation & Date Rules\"",
              "timedOut": false,
              "duration": 598,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "let options = new chrome.Options();\noptions.addArguments('--remote-allow-origins=*');\noptions.addArguments('--disable-search-engine-choice-screen');\noptions.addArguments('--start-maximized');\ndriver = await new Builder().forBrowser('chrome').setChromeOptions(options).build();",
              "err": {},
              "uuid": "39e879e7-a7fd-4cd3-8209-3a7f3d1a093d",
              "parentUUID": "d1904b90-72cb-45e3-a7f9-402bf081a4d7",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"TC-04: Driver Vehicle Reservation & Date Rules\"",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules \"after all\" hook in \"TC-04: Driver Vehicle Reservation & Date Rules\"",
              "timedOut": false,
              "duration": 1063,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (driver) {\n    // Final Safety Net Cleanup\n    await cleanupReservation(driver);\n    await driver.quit();\n}",
              "err": {},
              "uuid": "8095f91f-adc9-4212-83d6-d8a519ecf8ee",
              "parentUUID": "d1904b90-72cb-45e3-a7f9-402bf081a4d7",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "Step 1: Login as Driver",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 1: Login as Driver",
              "timedOut": false,
              "duration": 1615,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await driver.get(APP_URL);\nconst emailInput = await driver.wait(until.elementLocated(By.css('input[type=\"email\"]')), 10000);\nawait emailInput.sendKeys(DRIVER_EMAIL);\nawait driver.findElement(By.css('input[type=\"password\"]')).sendKeys(DRIVER_PASS);\nawait driver.findElement(By.className('login-button')).click();\nawait driver.wait(until.elementLocated(By.xpath(\"//button[text()='Reserve Vehicle']\")), 10000);",
              "err": {},
              "uuid": "cb1c1e89-2749-4978-9da1-c90f40c3fc3e",
              "parentUUID": "d1904b90-72cb-45e3-a7f9-402bf081a4d7",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 2: Navigate to Vehicle List",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 2: Navigate to Vehicle List",
              "timedOut": false,
              "duration": 1590,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const reserveBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve Vehicle']\"));\nawait reserveBtn.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 10000);\nawait driver.wait(until.elementLocated(By.className('vehicle-table')), 10000);",
              "err": {},
              "uuid": "6c4dff63-7470-4499-9891-55703274ba36",
              "parentUUID": "d1904b90-72cb-45e3-a7f9-402bf081a4d7",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 1. Valid: Start Today, End Tomorrow -> Expect: success",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 3: 1. Valid: Start Today, End Tomorrow -> Expect: success",
              "timedOut": false,
              "duration": 4305,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn't leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className('reserve-button'));\n    if (reserveBtns.length === 0) {\n        throw new Error(\"No available vehicles to reserve! Previous cleanup might have failed.\");\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\"arguments[0].scrollIntoView(true);\", firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Reserve Vehicle']\")), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve']\"));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === 'success') {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n            // Verify \"Remove Reserve\" button appears\n            await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Remove Reserve']\")), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\"Reserve Vehicle\")) {\n                 let msg = \"Unknown\";\n                 try { msg = await driver.findElement(By.className('profile-message')).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName('h2'));\n        let headerText = headers.length > 0 ? await headers[0].getText() : \"\";\n        if (headerText.includes('List of All Vehicles')) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className('profile-message')), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === 'success') {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}",
              "err": {},
              "uuid": "7ae4f00d-739a-4db5-9aff-5abda80ea1b3",
              "parentUUID": "d1904b90-72cb-45e3-a7f9-402bf081a4d7",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 2. Valid: Start Today, End +30 days -> Expect: success",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 3: 2. Valid: Start Today, End +30 days -> Expect: success",
              "timedOut": false,
              "duration": 4427,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn't leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className('reserve-button'));\n    if (reserveBtns.length === 0) {\n        throw new Error(\"No available vehicles to reserve! Previous cleanup might have failed.\");\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\"arguments[0].scrollIntoView(true);\", firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Reserve Vehicle']\")), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve']\"));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === 'success') {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n            // Verify \"Remove Reserve\" button appears\n            await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Remove Reserve']\")), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\"Reserve Vehicle\")) {\n                 let msg = \"Unknown\";\n                 try { msg = await driver.findElement(By.className('profile-message')).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName('h2'));\n        let headerText = headers.length > 0 ? await headers[0].getText() : \"\";\n        if (headerText.includes('List of All Vehicles')) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className('profile-message')), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === 'success') {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}",
              "err": {},
              "uuid": "c4034257-5f60-4a6f-b8d7-5f22dfbbd9b3",
              "parentUUID": "d1904b90-72cb-45e3-a7f9-402bf081a4d7",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 3. Invalid: Start Today, End Today (0 days) -> Expect: error",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 3: 3. Invalid: Start Today, End Today (0 days) -> Expect: error",
              "timedOut": false,
              "duration": 4640,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn't leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className('reserve-button'));\n    if (reserveBtns.length === 0) {\n        throw new Error(\"No available vehicles to reserve! Previous cleanup might have failed.\");\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\"arguments[0].scrollIntoView(true);\", firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Reserve Vehicle']\")), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve']\"));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === 'success') {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n            // Verify \"Remove Reserve\" button appears\n            await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Remove Reserve']\")), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\"Reserve Vehicle\")) {\n                 let msg = \"Unknown\";\n                 try { msg = await driver.findElement(By.className('profile-message')).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName('h2'));\n        let headerText = headers.length > 0 ? await headers[0].getText() : \"\";\n        if (headerText.includes('List of All Vehicles')) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className('profile-message')), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === 'success') {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}",
              "err": {
                "message": "Error: Bug Found: App allowed invalid reservation duration (0 days).",
                "estack": "Error: Bug Found: App allowed invalid reservation duration (0 days).\n    at Context.<anonymous> (automation\\TC04.js:166:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "f5adada9-70db-459e-adc9-447046a07414",
              "parentUUID": "d1904b90-72cb-45e3-a7f9-402bf081a4d7",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "Step 3: 4. Invalid: Start Today, End +31 days -> Expect: error",
              "fullTitle": "TC-04: Driver Vehicle Reservation & Date Rules Step 3: 4. Invalid: Start Today, End +31 days -> Expect: error",
              "timedOut": false,
              "duration": 4649,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// TRY-FINALLY BLOCK TO GUARANTEE CLEANUP\ntry {\n    // 1. Initial Cleanup (ensure previous test didn't leave a mess)\n    await cleanupReservation(driver);\n    // 2. Find an Available Vehicle\n    const reserveBtns = await driver.findElements(By.className('reserve-button'));\n    if (reserveBtns.length === 0) {\n        throw new Error(\"No available vehicles to reserve! Previous cleanup might have failed.\");\n    }\n    // Click the first one\n    const firstReserveBtn = reserveBtns[0];\n    await driver.executeScript(\"arguments[0].scrollIntoView(true);\", firstReserveBtn);\n    await firstReserveBtn.click();\n    // 3. Wait for Reservation Form\n    await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='Reserve Vehicle']\")), 5000);\n    // 4. Set Date\n    const targetDate = getDate(tc.daysOffset);\n    await selectDateOnCalendar(driver, targetDate);\n    // 5. Submit\n    const submitBtn = await driver.findElement(By.xpath(\"//button[text()='Reserve']\"));\n    await submitBtn.click();\n    // 6. Verification\n    if (tc.expected === 'success') {\n        try {\n            // Expect redirect back to list\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n            // Verify \"Remove Reserve\" button appears\n            await driver.wait(until.elementLocated(By.xpath(\"//button[text()='Remove Reserve']\")), 5000);\n        } catch (err) {\n            // Check if stuck on form\n            const pageSource = await driver.getPageSource();\n            if (pageSource.includes(\"Reserve Vehicle\")) {\n                 let msg = \"Unknown\";\n                 try { msg = await driver.findElement(By.className('profile-message')).getText(); } catch(e){}\n                 throw new Error(`Expected SUCCESS but stayed on form. Msg: ${msg}`);\n            }\n            throw err;\n        }\n    } else {\n        // EXPECTED ERROR\n        await driver.sleep(1000);\n        const headers = await driver.findElements(By.tagName('h2'));\n        let headerText = headers.length > 0 ? await headers[0].getText() : \"\";\n        if (headerText.includes('List of All Vehicles')) {\n            // BUG FOUND: It redirected (Success) when it should have failed.\n            throw new Error(`Bug Found: App allowed invalid reservation duration (${tc.daysOffset} days).`);\n        } else {\n            // Correct: Stayed on page, show error\n            const msgEl = await driver.wait(until.elementLocated(By.className('profile-message')), 2000);\n            expect(await msgEl.getText()).to.not.be.empty;\n            \n            // Manual Reset back to list so next test can run\n            const backBtn = await driver.findElement(By.className('goto-vehicle-select-button'));\n            await backBtn.click();\n            await driver.wait(until.elementLocated(By.xpath(\"//h2[text()='List of All Vehicles']\")), 5000);\n        }\n    }\n} finally {\n    // --- THIS RUNS EVERY TIME, EVEN IF BUG FOUND ---\n    // If we ended up with a reservation (validly OR via bug), remove it now.\n    if (tc.expected === 'success') {\n        await cleanupReservation(driver);\n    } else {\n        // If it was an error test case, check if it accidentally created a reservation anyway\n        // We pause briefly to let any redirects finish\n        await driver.sleep(500);\n        await cleanupReservation(driver);\n    }\n}",
              "err": {
                "message": "Error: Bug Found: App allowed invalid reservation duration (31 days).",
                "estack": "Error: Bug Found: App allowed invalid reservation duration (31 days).\n    at Context.<anonymous> (automation\\TC04.js:166:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                "diff": null
              },
              "uuid": "946af4e2-bb35-4ff5-8071-5694e2f00c06",
              "parentUUID": "d1904b90-72cb-45e3-a7f9-402bf081a4d7",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "cb1c1e89-2749-4978-9da1-c90f40c3fc3e",
            "6c4dff63-7470-4499-9891-55703274ba36",
            "7ae4f00d-739a-4db5-9aff-5abda80ea1b3",
            "c4034257-5f60-4a6f-b8d7-5f22dfbbd9b3"
          ],
          "failures": [
            "f5adada9-70db-459e-adc9-447046a07414",
            "946af4e2-bb35-4ff5-8071-5694e2f00c06"
          ],
          "pending": [],
          "skipped": [],
          "duration": 21226,
          "root": false,
          "rootEmpty": false,
          "_timeout": 60000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 2000
    }
  ],
  "meta": {
    "mocha": {
      "version": "11.7.5"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "full-report",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.4"
    },
    "marge": {
      "options": {
        "reportDir": "test-report",
        "reportFilename": "full-report",
        "overwrite": "true"
      },
      "version": "6.3.2"
    }
  }
}